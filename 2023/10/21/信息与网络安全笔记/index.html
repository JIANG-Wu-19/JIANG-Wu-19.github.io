<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="信息与网络安全笔记, J&amp;Ocean BLOG">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>信息与网络安全笔记 | J&amp;Ocean BLOG</title>
    <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>



   <style>
    body{
       background-image: url(https://github.com/JIANG-Wu-19/JIANG-Wu-19/blob/master/99759389_p0.png?raw=true);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.ico" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">J&amp;Ocean BLOG</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.ico" class="logo-img circle responsive-img">
        
        <div class="logo-name">J&amp;Ocean BLOG</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">信息与网络安全笔记</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/">
                                <span class="chip bg-color">信息安全</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E7%AC%94%E8%AE%B0/" class="post-category">
                                笔记
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-10-21
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    23.6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    82 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h2><h3 id="网络安全威胁"><a href="#网络安全威胁" class="headerlink" title="网络安全威胁"></a>网络安全威胁</h3><ul>
<li>恶意软件</li>
<li>安全性破坏</li>
<li>DoS攻击</li>
</ul>
<h3 id="信息与网络安全目标"><a href="#信息与网络安全目标" class="headerlink" title="信息与网络安全目标"></a>信息与网络安全目标</h3><p>三个关键目标：</p>
<ul>
<li>机密性<ul>
<li>数据机密性</li>
<li>隐私性</li>
</ul>
</li>
<li>完整性<ul>
<li>数据完整性</li>
<li>系统完整性</li>
</ul>
</li>
<li>可用性</li>
</ul>
<h3 id="TCP-x2F-IP安全服务模型"><a href="#TCP-x2F-IP安全服务模型" class="headerlink" title="TCP&#x2F;IP安全服务模型"></a>TCP&#x2F;IP安全服务模型</h3><p><img src="/imgs/iis/1.png" alt="image-20230915101220938"></p>
<h3 id="网络攻击"><a href="#网络攻击" class="headerlink" title="网络攻击"></a>网络攻击</h3><ul>
<li>主动攻击<ul>
<li>伪装</li>
<li>重放</li>
<li>篡改</li>
<li>拒绝服务</li>
</ul>
</li>
<li>被动攻击<ul>
<li>窃听攻击</li>
<li>流量分析</li>
</ul>
</li>
</ul>
<h3 id="五类安全服务"><a href="#五类安全服务" class="headerlink" title="五类安全服务"></a>五类安全服务</h3><ul>
<li>认证</li>
<li>访问控制</li>
<li>保密</li>
<li>完整性</li>
<li>不可否认</li>
</ul>
<h3 id="八类安全机制"><a href="#八类安全机制" class="headerlink" title="八类安全机制"></a>八类安全机制</h3><p><img src="/imgs/iis/2.png" alt="image-20230915102412545"></p>
<h2 id="数据加密技术"><a href="#数据加密技术" class="headerlink" title="数据加密技术"></a>数据加密技术</h2><h3 id="数据加密技术概述"><a href="#数据加密技术概述" class="headerlink" title="数据加密技术概述"></a>数据加密技术概述</h3><ul>
<li>密码学</li>
<li>加密系统</li>
<li>密码分析</li>
<li>加密</li>
<li>明文</li>
<li>密文</li>
<li>密钥</li>
</ul>
<h4 id="对称密码和公钥密码"><a href="#对称密码和公钥密码" class="headerlink" title="对称密码和公钥密码"></a>对称密码和公钥密码</h4><ul>
<li>对称密码<ul>
<li>密钥：加密和解密密钥相同或可相互推导</li>
<li>优点：加密速度快</li>
<li>缺点：密钥管理复杂</li>
</ul>
</li>
<li>公钥密码<ul>
<li>密钥：公钥与私钥不同且难以用私钥推导公钥</li>
<li>优点：密钥管理简单</li>
<li>缺点：加密速度慢</li>
</ul>
</li>
</ul>
<h4 id="对称密钥"><a href="#对称密钥" class="headerlink" title="对称密钥"></a>对称密钥</h4><p>加密和解密使用的是同样的密钥</p>
<h4 id="公开密钥"><a href="#公开密钥" class="headerlink" title="公开密钥"></a>公开密钥</h4><ul>
<li>加密和解密的密钥不同</li>
<li>密钥分为公钥、私钥</li>
</ul>
<h4 id="密码学基本原则之一"><a href="#密码学基本原则之一" class="headerlink" title="密码学基本原则之一"></a>密码学基本原则之一</h4><ul>
<li>Kerckhoffs原则：密码系统是安全的，表明可以公开除了密钥之外的整个密码系统的一切内容</li>
<li>密码系统的内部工作原理对于攻击者完全公开，唯一秘密是密钥</li>
</ul>
<p>维护密钥成本低于维护密码算法</p>
<h3 id="经典加密"><a href="#经典加密" class="headerlink" title="经典加密"></a>经典加密</h3><h4 id="简单替换密码"><a href="#简单替换密码" class="headerlink" title="简单替换密码"></a>简单替换密码</h4><p>改进：非常规字母表替换</p>
<p>破解方法一：穷举式密钥检索</p>
<p>破解方法二：统计字母频率</p>
<h4 id="双换位密码"><a href="#双换位密码" class="headerlink" title="双换位密码"></a>双换位密码</h4><h4 id="一次性密码本"><a href="#一次性密码本" class="headerlink" title="一次性密码本"></a>一次性密码本</h4><p>$明文 \oplus 密钥&#x3D;密文$</p>
<h3 id="对称密钥加密"><a href="#对称密钥加密" class="headerlink" title="对称密钥加密"></a>对称密钥加密</h3><h4 id="对称密钥加密的分类"><a href="#对称密钥加密的分类" class="headerlink" title="对称密钥加密的分类"></a>对称密钥加密的分类</h4><ul>
<li>流密码加密—类似于一次性密码本<ul>
<li>密钥较短</li>
<li>密钥延展成长二进制码流</li>
<li>类似一次性密码本</li>
</ul>
</li>
<li>分组密码加密—类似于电报密码本<ul>
<li>密钥决定密码本的选择</li>
<li>电报密码本的电子版本</li>
<li>扰乱和扩散的两个原则</li>
</ul>
</li>
</ul>
<h4 id="流密码加密"><a href="#流密码加密" class="headerlink" title="流密码加密"></a>流密码加密</h4><p><img src="/imgs/iis/3.png" alt="image-20231008111905960"></p>
<p>用n位长度的密钥K，并将其延展成长长的密钥流，然后该密钥流与明文P进行异或运算，生成密文C。接收方再用同样的方法解密</p>
<ul>
<li>A5&#x2F;1算法<ul>
<li>A5 &#x2F; 1是用于在GSM蜂窝电话标准中提供无线通信隐私的流密码算法。</li>
<li>A5 &#x2F; 1算法使用三个线性反馈移位寄存器：<ul>
<li>X: 19 bits (x0,x1,x2, …,x18)</li>
<li>Y: 22 bits (y0,y1,y2, …,y21)</li>
<li>Z: 23 bits (z0,z1,z2, …,z22)</li>
</ul>
</li>
<li>A5&#x2F;1算法的密钥K共64位，用于三个线性反馈移位寄存器的初始填充，充当三个寄存器的初始值</li>
<li>三个寄存器用密钥填充之后，就可以开始滚动生成密钥流了。每个回合可以拆分为三个步骤：<ul>
<li>反馈多项式（Feedback Polynomial）<ul>
<li>这里使用的是择多原则，三个寄存器中各选择一个钟控信号，19位寄存器中为第8位，22位、23位寄存器中皆为第10位。</li>
<li>根据这三个钟控信号的取值，必定有0或1数量居多，居多的寄存器需要进行位移操作。</li>
</ul>
</li>
<li>位移<ul>
<li>$m&#x3D;maj(x_8,y_{10},z_{10})$</li>
<li>需要移位的寄存器向右移位，将t填入空出来的第0位</li>
<li>if $x_8&#x3D;m$，X右移，$t&#x3D;x_{13} \oplus x_{16} \oplus x_{17} \oplus x_{18}$</li>
<li>if $y_{10}&#x3D;m$，Y右移，$t&#x3D;y_{20} \oplus y_{21}$</li>
<li>if $z_{10}&#x3D;m$，Z右移，$t&#x3D;z_7 \oplus z_{20} \oplus z_{21} \oplus z_{22}$</li>
</ul>
</li>
<li>取KEY<ul>
<li>取三个寄存器的最后一位，也就是19位、22位、23位，进行异或操作，得到的结果为这一轮密钥流的一位:$Keystream bit&#x3D;x_{18} \oplus y_{21} \oplus z_{22}$</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="分组密码加密"><a href="#分组密码加密" class="headerlink" title="分组密码加密"></a>分组密码加密</h4><ul>
<li>将明文分割成<strong>固定长度</strong>的分组，并生成固定长度的密文分组；</li>
<li>密文都是通过“用函数F对明文进行若干轮的<strong>迭代</strong>计算”得到的；</li>
<li>函数F：依赖于前一轮计算的输出和密钥K，称为<strong>轮函数</strong>；</li>
<li>一般用<strong>软件</strong>实现</li>
</ul>
<h5 id="Feistel密码"><a href="#Feistel密码" class="headerlink" title="Feistel密码"></a>Feistel密码</h5><ul>
<li>明文分组P被分割成左右两部分，$P&#x3D;(L_0,R_0)$</li>
<li>对于每一轮i，i&#x3D;1,2,3,…,n<ul>
<li>$L_i&#x3D;R_{i-1}$</li>
<li>$R_i&#x3D;L_{i-1} \oplus F(R_{i-1},K_i)$</li>
</ul>
</li>
<li>密文：$C&#x3D;(L_n,R_n)$</li>
<li>解密<ul>
<li>$C&#x3D;(L_n,R_n)$</li>
<li>$R_{i-1}&#x3D;L_i$</li>
<li>$L_{i-1}&#x3D;R_i \oplus F(R_{i-1},K_i)$</li>
<li>$P&#x3D;(L_0,R_0)$</li>
</ul>
</li>
</ul>
<p><img src="/imgs/iis/4.png" alt="image-20231016194440635"></p>
<h5 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h5><ul>
<li><p>1970年代</p>
</li>
<li><p>基于IBM的Lucifer 密码</p>
</li>
<li><p>其争议性</p>
<ul>
<li><p>NSA密码参与；</p>
</li>
<li><p>设计过程保密；</p>
</li>
<li><p>密钥长度从128位降到56位；</p>
</li>
<li><p>对Lucifer 进行了一些修改。</p>
</li>
</ul>
</li>
</ul>
<p>原理</p>
<ul>
<li>使用一个56 位的密钥以及附加的8 位奇偶校验位，产生最大64 位的分组大小；</li>
<li>使用Feistel技术，将加密的文本块分成两半;</li>
<li>用子密钥对其中一半应用循环功能，然后将输出与另一半进行“异或”运算；</li>
<li>接着交换这两半，这一过程会继续下去，但最后一个循环不交换。</li>
<li>DES 使用16 个循环，使用异或，置换，代换，移位操作四种基本运算。</li>
<li>S-box起到重要作用，每一个S-box将6个二进制位映射到4个二进制位。</li>
</ul>
<p><img src="/imgs/iis/5.png" alt="image-20231016194723854"></p>
<p><img src="/imgs/iis/6.png" alt="image-20231016195055394"></p>
<p><img src="/imgs/iis/7.png" alt="image-20231016195201337"></p>
<p><img src="/imgs/iis/8.png" alt="image-20231016195247933"></p>
<h5 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h5><ul>
<li>替代DES;</li>
<li>迭代式分组加密;</li>
<li>没有采用Feistel结构;</li>
<li>分组大小为128位;</li>
<li>三种密钥长度：128，192，256</li>
<li>依照密钥长度不同，运算轮次从10轮至14轮不等</li>
<li>每轮包含4个函数，分为3个层次<ul>
<li>ByteSub(非线性层)</li>
<li>ShiftRow(线性混合层)</li>
<li>MixColumn(非线性层)</li>
<li>AddRoundKey(密钥添加层)</li>
</ul>
</li>
</ul>
<p><img src="/imgs/iis/9.png" alt="image-20231016201355735"></p>
<ul>
<li>行移位</li>
</ul>
<p><img src="/imgs/iis/10.png" alt="image-20231016201510542"></p>
<p><img src="/imgs/iis/11.png" alt="image-20231016201604209"></p>
<ul>
<li>轮密钥合并</li>
</ul>
<p><img src="/imgs/iis/12.png" alt="image-20231016201635295"></p>
<h3 id="公开密钥加密"><a href="#公开密钥加密" class="headerlink" title="公开密钥加密"></a>公开密钥加密</h3><p>对称密钥带来的问题：</p>
<ul>
<li>密钥不能公开；</li>
<li>如何安全地交换密钥</li>
<li>如何确认发送者身份</li>
</ul>
<p>需要解决：</p>
<ul>
<li>可靠密钥的传输通道问题</li>
<li>如何提供与手写签名等效的认证体系</li>
</ul>
<h4 id="公钥加密算法"><a href="#公钥加密算法" class="headerlink" title="公钥加密算法"></a>公钥加密算法</h4><ul>
<li>公钥加密算法使用两把完全不同但又是完全匹配的一对钥匙—公钥和私钥。</li>
<li>加密明文时采用公钥加密。</li>
<li>解密密文时使用私钥才能完成，只有使用匹配的一对公钥和私钥，才能完成加密和解密过程。</li>
</ul>
<p><strong>公开的密钥为公钥</strong></p>
<p><strong>不公开的密钥为私钥</strong></p>
<p><img src="/imgs/iis/13.png" alt="image-20231016202349985"></p>
<h5 id="公钥加密"><a href="#公钥加密" class="headerlink" title="公钥加密"></a>公钥加密</h5><ul>
<li>两个密钥：<ul>
<li>公钥：可为任何人知道，用来加密消息或者验证签名;</li>
<li>私钥：只有接收者本人知道，用来解密消息和签名。</li>
</ul>
</li>
<li>不对称性：<ul>
<li>用来加密消息的密钥不能用来解密消息</li>
</ul>
</li>
</ul>
<p><img src="/imgs/iis/14.png" alt="image-20231016202822051"></p>
<h5 id="公钥密码系统的加密原理"><a href="#公钥密码系统的加密原理" class="headerlink" title="公钥密码系统的加密原理"></a>公钥密码系统的加密原理</h5><ul>
<li>每个通信实体有一对密钥（公钥，私钥）。公钥公开，用于加密和验证签名，私钥保密，用作解密和签名</li>
<li>A向B 发送消息，用B的公钥加密</li>
<li>B收到密文后，用自己的私钥解密</li>
<li>任何人向B发送信息都可以使用同一个密钥（B的公钥）加密,没有其他人可以得到B的私钥，所以只有B可以解密</li>
</ul>
<p><img src="/imgs/iis/15.png" alt="image-20231016210442978"></p>
<h4 id="通讯方式"><a href="#通讯方式" class="headerlink" title="通讯方式"></a>通讯方式</h4><h5 id="第一回合"><a href="#第一回合" class="headerlink" title="第一回合"></a>第一回合</h5><ul>
<li>正常情况<ul>
<li>“客户”-&gt;“服务器”：你好；</li>
<li>“服务器”-&gt;“客户”：你好，我是服务器；</li>
<li>“客户”-&gt;“服务器”：我的密码是……</li>
</ul>
</li>
<li>黑客入侵<ul>
<li>“客户”-&gt;“服务器”：你好；</li>
<li>黑客在“客户”和“服务器”之间的某个路由器上截获“客户”发给服务器的信息，然后自己冒充“服务器”；</li>
<li>“黑客”-&gt;“客户”：你好，我是服务器；</li>
<li>“客户”-&gt;“黑客”：我的密码是……</li>
</ul>
</li>
</ul>
<h5 id="第二回合"><a href="#第二回合" class="headerlink" title="第二回合"></a>第二回合</h5><ul>
<li>“客户”-&gt;“服务器”：你好；</li>
<li>“黑客”-&gt;“客户”：你好，我是服务器；</li>
<li>“客户”-&gt;“黑客”：向我证明你就是服务器；</li>
<li>“黑客”-&gt;“客户”：你好，我是服务器{你好，我是服务器}[？？？|RSA]。</li>
<li>黑客无法冒充，因为他不知道服务器的私钥，无法加密某个字符串后发送给客户去验证。</li>
<li>“客户”：有内鬼，终止交易！</li>
</ul>
<h5 id="第三回合"><a href="#第三回合" class="headerlink" title="第三回合"></a>第三回合</h5><ul>
<li>“客户”-&gt;“服务器”：你好</li>
<li>“服务器”-&gt;“客户”：你好，我是服务器</li>
<li>“客户”-&gt;“服务器”：向我证明你就是服务器</li>
<li>“服务器”-&gt;“客户”：你好，我是服务器{你好，我是服务器}[私钥|RSA]</li>
<li>“客户”-&gt;“服务器”：{我的帐号是aaa，密码是123，把我的余额的信息发给我看看}[公钥|RSA]</li>
<li>“服务器”-&gt;“客户”：{你的余额是100元}[私钥|RSA]</li>
</ul>
<h5 id="第四回合"><a href="#第四回合" class="headerlink" title="第四回合"></a>第四回合</h5><ul>
<li>“客户”-&gt;“服务器”：你好</li>
<li>“服务器”-&gt;“客户”：你好，我是服务器</li>
<li>“客户”-&gt;“服务器”：向我证明你就是服务器</li>
<li>“服务器”-&gt;“客户”：你好，我是服务器{你好，我是服务器}[私钥|RSA]</li>
<li>“客户”-&gt;“服务器”：{我们后面的通信过程，用对称加密来进行，这里是对称加密算法和密钥}[公钥|RSA]</li>
<li>&#x2F;&#x2F;红色字体的部分是对称加密的算法和密钥的具体内容，客户把它们发送给服务器。</li>
<li>“服务器”-&gt;“客户”：{OK，收到！}[密钥|对称加密算法]</li>
<li>“客户”-&gt;“服务器”：{我的帐号是aaa，密码是123，把我的余额的信息发给我看看}[密钥|对称加密算法]</li>
<li>“服务器”-&gt;“客户”：{你的余额是100元}[密钥|对称加密算法]</li>
</ul>
<h4 id="补充数学概念"><a href="#补充数学概念" class="headerlink" title="补充数学概念"></a>补充数学概念</h4><h5 id="同余式"><a href="#同余式" class="headerlink" title="同余式"></a>同余式</h5><p>同余式是数论的基本概念之一，设m是给定的一个正整数，a、b是整数，若满足$m|(a-b)$，则称a与b对模m同余，记为$a \equiv b(\mod m)$，这个式子称为模m的同余式。</p>
<p>$m|(a-b)$表示m能够整除(a-b)，即$a \mod m&#x3D;b \mod m$</p>
<h5 id="欧拉函数"><a href="#欧拉函数" class="headerlink" title="欧拉函数"></a>欧拉函数</h5><p>欧拉函数$\varphi (n)$是小于等于n的正整数中与n互质的数的个数</p>
<p>对于任意互质的a和n，有$a^{\varphi (n)}\equiv 1(\mod n)$，即$a^{\varphi (n)} \mod n &#x3D;1$</p>
<p>如果n是质数，则$\varphi (n) &#x3D;n-1$，因为质数与小于它的每一个正整数都互质</p>
<p>如果$n&#x3D;p*q$，而p和q互质，则：</p>
<p>$\varphi (n)&#x3D;\varphi(p*q)&#x3D;\varphi(p)*\varphi(q)&#x3D;(p-1)(q-1)$</p>
<h4 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h4><ul>
<li><p>生成公钥&#x2F;私钥对</p>
<ol>
<li>取两个大素数p, q ($p \neq q$), 保密;</li>
<li>计算$n&#x3D;p*q$，公开n;</li>
<li>计算欧拉函数$\varphi (n)&#x3D;(p-1)(q-1)$；</li>
<li>随机选择整数e($1 \lt e \lt \varphi(n)$)，使得e和$\varphi(n)$互质即两个数的最大公约数为1；</li>
<li>计算d,使得$ed&#x3D; 1(\mod \varphi(n))$，也就是$ed&#x3D;k\varphi(n)+1$；</li>
<li>公开$(e,n)&#x3D;(5,119)$；</li>
<li>将d保密，丢弃p,q</li>
</ol>
<p>$$<br>m^{k(p-1)(q-1)+1} \equiv m(\mod n)<br>$$</p>
<p>$$<br>m^{ed} \equiv m(\mod n)<br>$$</p>
</li>
<li><p>加密消息$m$</p>
<ul>
<li>获取接收者的公钥：$K_u&#x3D;\lbrace e,n \rbrace$</li>
<li>计算：$c&#x3D;m^e \mod n(0 \le m \le n)$</li>
</ul>
</li>
<li><p>解密密文$c$</p>
<ul>
<li>使用自己的私钥：$K_R&#x3D;\lbrace d,n \rbrace$</li>
<li>计算：$m&#x3D;c^d \mod n$</li>
</ul>
</li>
</ul>
<h4 id="Diffie-Hellman密钥交换方案"><a href="#Diffie-Hellman密钥交换方案" class="headerlink" title="Diffie Hellman密钥交换方案"></a>Diffie Hellman密钥交换方案</h4><p>使两个用户安全地交换一个密钥以便用于以后的报文加密，这个算法本身限于<strong>密钥交换</strong>的用途</p>
<p>在Diffie-Hellman密钥交换算法中单项函数是模指数运算。它的逆过程是离散对数问题，其Diffie-Hellman算法的保密性基于求mod P解离散对数问题的困难</p>
<h5 id="本原元"><a href="#本原元" class="headerlink" title="本原元"></a>本原元</h5><p>定义素数g的本原元（primitive root）为其乘方能够产生从1到g-1的所有整数的数。也就是说，如果n是素数g的本原元，那么有下列数字：<br>$$<br>n \mod g,n^2 \mod g,n^{g-1} \mod g<br>$$<br>这g−1个数字互不相同，而且包含了从1到g−1的所有整数</p>
<h5 id="离散对数"><a href="#离散对数" class="headerlink" title="离散对数"></a>离散对数</h5><p>对于任何小于g的整数a和素数g的本原元n来说，能够找到唯一的指数i满足：<br>$$<br>a&#x3D;b^i \mod g ,0 \le i \le (g-1)<br>$$<br>称指数i为a对于基数n和运算mod g 的离散对数</p>
<h5 id="密钥原理"><a href="#密钥原理" class="headerlink" title="密钥原理"></a>密钥原理</h5><p>设$g$是一个质数，$n$是$g$的本原元，要求$n$和$g$是公开的，则网络中的某一用户可以任选一个小于$g$的整数$a$作为秘密密钥</p>
<p><img src="/imgs/iis/16.png" alt="image-20231020104322307"></p>
<h4 id="椭圆曲线加密ECC"><a href="#椭圆曲线加密ECC" class="headerlink" title="椭圆曲线加密ECC"></a>椭圆曲线加密ECC</h4><h5 id="椭圆曲线"><a href="#椭圆曲线" class="headerlink" title="椭圆曲线"></a>椭圆曲线</h5><p>已知椭圆曲线群<br>$$<br>E_p(a,b):y^2&#x3D;x^3+ax+b,4a^3+27b^2 \neq 0<br>$$<br><strong>加法</strong></p>
<p>过曲线上的两点A、B画一条直线，找到直线与椭圆曲线的交点，交点关于x轴对称位置的点，定义为A+B，即为加法。</p>
<p><img src="/imgs/iis/17.png" alt="image-20231020110318344"></p>
<p><strong>取反</strong></p>
<p>将A关于x轴对称位置的点定义为-A，即椭圆曲线的正负取反运算</p>
<p><img src="/imgs/iis/18.png" alt="image-20231020110352306"></p>
<p><strong>二倍运算</strong></p>
<p>将过椭圆曲线在A点的切线，与椭圆曲线的交点，交点关于x轴对称位置的点，定义为A + A，即2A，即为二倍运算。</p>
<p><img src="/imgs/iis/19.png" alt="image-20231020110617599"></p>
<p><strong>无穷远点</strong></p>
<p>如果将A与-A相加，过A与-A的直线平行于y轴，可以认为直线与椭圆曲线相交于无穷远点</p>
<p><strong>有限域上的椭圆曲线</strong></p>
<p>已知有限域$GF(p)(p&#x3D;q^n,q&gt;3)$上的椭圆曲线群：<br>$$<br>E_p(a,b):y^2&#x3D;x^3+ax+b(\mod p)<br>$$<br>有限域GF(p)指给定某个质数p，由0、1、2……p-1共p个元素组成的整数集合中定义的加减乘除运算</p>
<p><strong>有限域$GF(p)$</strong></p>
<p>Fp中有p（p为质数）个元素0,1,2,…, p-2,p-1</p>
<p>加法：$a+b \equiv c(\mod p)$</p>
<p>乘法：$a \times b \equiv c(\mod p)$</p>
<p>除法：$a&#x2F;b \equiv c(\mod p)$</p>
<p>Fp单位元是1，零元是0</p>
<p>满足交换律、结合律、分配律</p>
<h5 id="加密原理"><a href="#加密原理" class="headerlink" title="加密原理"></a>加密原理</h5><p>在定义了这一系列运算之后，我们可以很容易的计算出给定的G点对应的2G，3G等点。即：当给定G点时，已知x，求xG点并不困难。反之，已知xG点，求x则非常困难。此即为椭圆曲线加密算法背后的数学原理。</p>
<h5 id="计算及求解"><a href="#计算及求解" class="headerlink" title="计算及求解"></a>计算及求解</h5><p>计算椭圆曲线$y^2&#x3D;x^3+ax+b(\mod p)$两点P，Q的和<br>$$<br>\left{\begin{array}{c}<br>\mathrm{y}^2&#x3D;\mathrm{x}^3+\mathrm{ax}+\mathrm{b}(\bmod \mathrm{p}) \<br>\mathrm{y}-\mathrm{y}<em>{\mathrm{p}}&#x3D;k\left(x-x_p\right) \<br>k&#x3D;\frac{y_q-y_p}{x_q-x_p}<br>\end{array}\right.<br>$$<br>计算过椭圆曲线点P的二倍点R<br>$$<br>\left{\begin{array}{c}<br>x_r&#x3D;\left(\frac{3 \mathrm{x}</em>{\mathrm{p}}^2+\mathrm{a}}{2 \mathrm{y}<em>{\mathrm{p}}}\right)^2-2 x_p \<br>y_r&#x3D;\left(\frac{3 \mathrm{x}</em>{\mathrm{p}}^2+\mathrm{a}}{2 \mathrm{y}_{\mathrm{p}}}\right)\left(x_p-x_r\right)-y_p<br>\end{array}\right.<br>$$</p>
<h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><ul>
<li>约定：选取$E_p(a,b)$和生成元$G$，公开</li>
<li>密钥的生成：选取私钥d,公钥为$e&#x3D;dG$</li>
</ul>
<h5 id="加密过程"><a href="#加密过程" class="headerlink" title="加密过程"></a>加密过程</h5><ul>
<li>将明文消息m通过编码嵌入到曲线上的点Pm</li>
<li>随机选取数字k，将密文$C_m&#x3D;\lbrace kG,Pm+ke \rbrace$发送</li>
</ul>
<h5 id="解密过程"><a href="#解密过程" class="headerlink" title="解密过程"></a>解密过程</h5><ul>
<li>收到密文$C_m&#x3D;\lbrace kG,Pm+ke \rbrace$</li>
<li>利用自己的密钥d，计算$(Pm+ke)-dkG&#x3D;Pm$</li>
</ul>
<p><img src="/imgs/iis/20.png" alt="image-20231020112343650"></p>
<h2 id="消息认证及数字签名"><a href="#消息认证及数字签名" class="headerlink" title="消息认证及数字签名"></a>消息认证及数字签名</h2><p>消息认证是一种允许通信者验证所收消息是否可信的措施，用于确认：</p>
<ul>
<li>内容是否篡改</li>
<li>来源是否可信</li>
</ul>
<h3 id="消息认证方法"><a href="#消息认证方法" class="headerlink" title="消息认证方法"></a>消息认证方法</h3><h4 id="散列函数"><a href="#散列函数" class="headerlink" title="散列函数"></a>散列函数</h4><ul>
<li>散列函数是一种创建数字“指纹”的方法。它把消息或数据压缩成摘要，使得数据量变小，将数据的格式固定下来</li>
<li>与消息认证码（MAC）不同的是散列函数不需要密钥输入</li>
</ul>
<p><strong>变长消息-&gt;散列函数-&gt;定长摘要</strong></p>
<h5 id="单向散列函数消息认证的三种方式"><a href="#单向散列函数消息认证的三种方式" class="headerlink" title="单向散列函数消息认证的三种方式"></a>单向散列函数消息认证的三种方式</h5><h6 id="使用传统加密"><a href="#使用传统加密" class="headerlink" title="使用传统加密"></a>使用传统加密</h6><p><img src="/imgs/iis/21.png" alt="image-20231020113334053"></p>
<h6 id="使用公钥加密"><a href="#使用公钥加密" class="headerlink" title="使用公钥加密"></a>使用公钥加密</h6><p><img src="/imgs/iis/22.png" alt="image-20231020113407576"></p>
<h6 id="使用秘密值"><a href="#使用秘密值" class="headerlink" title="使用秘密值"></a>使用秘密值</h6><p><img src="/imgs/iis/23.png" alt="image-20231020113609124"></p>
<ul>
<li><p>加密的散列函数，满足以下所有条件</p>
<ul>
<li>抗弱碰撞性：给定x和h(x)，要想找到任意y，满足$y \neq x$，并且h(y)&#x3D;h(x)，这是不可能的</li>
<li>抗强碰撞性：要想找到任意的x和y，使得$x \neq y$，并且h(y)&#x3D;h(x)，这是不可能的</li>
</ul>
</li>
<li><p>散列函数的工作模式</p>
<p><img src="/imgs/iis/24.png" alt="image-20231021171814550"></p>
</li>
<li><p>主流算法：MD5,SHA-1,SHA-2,Tiger Hash</p>
</li>
</ul>
<h5 id="MD5算法"><a href="#MD5算法" class="headerlink" title="MD5算法"></a>MD5算法</h5><p><img src="/imgs/iis/25.png" alt="image-20231021171938372"></p>
<p>MD5算法以一个任意长度的消息（M）作为输入，生成128位（16字节）的消息摘要作为输出，输入消息是按512位的分组处理的</p>
<p><img src="/imgs/iis/26.png" alt="image-20231021172013971"></p>
<h4 id="消息认证码"><a href="#消息认证码" class="headerlink" title="消息认证码"></a>消息认证码</h4><p>消息验证码是利用私钥产生的一小块数据，将其附到消息上，用来进行消息验证</p>
<p>消息认证码和散列函数区别：散列函数不需要加密，而<strong>消息认证码是需要加密的</strong></p>
<p>假设两个通信实体（如A和B）共享一个公共密钥Kab</p>
<ul>
<li>当A发消息M给B时，A计算消息认证码$MAC&#x3D;F(K_{ab},M)$，并将MAC和消息一起传送给B。</li>
<li>B对接收到的消息使用密钥Kab做相同运算，生成新的MAC。比较收到的MAC和计算得到的MAC</li>
</ul>
<p><img src="/imgs/iis/27.png" alt="image-20231021174421706"></p>
<p>假设只有接收者和发送者知道密钥，若收到的认证码与计算得到的认证码相吻合，则可得出下列结论：</p>
<ol>
<li>接收者能够确认消息没有被篡改</li>
<li>接收者能够确保消息来自合法的发送者</li>
<li>如果消息中包含序列号，而攻击者不能成功地修改序列号，那么接收者就可以确认消息的正确序列</li>
</ol>
<h5 id="基于散列函数消息认证码-HMAC"><a href="#基于散列函数消息认证码-HMAC" class="headerlink" title="基于散列函数消息认证码-HMAC"></a>基于散列函数消息认证码-HMAC</h5><ul>
<li>不改动就可以使用散列函数</li>
<li>嵌入式散列函数要有很好的可移植性</li>
<li>保持散列函数原有性能，不发生显著退化</li>
<li>使用和处理密钥简单</li>
</ul>
<p><img src="/imgs/iis/29.png" alt="image-20231021184403747"><br>$$<br>HMAC(K,M)&#x3D;H[(K^+ \oplus opad)||H[(K^+ \oplus opad)||M]]<br>$$<br>算法：</p>
<ol>
<li>在K的左端追加0，构成b比特的字符串$K^+$；</li>
<li>Ipad与$K^+$进行XOR生成b比特的分组$S_i$；</li>
<li>将M追加在$S_i$；</li>
<li>将H应用于步骤(3)所产生的数据流；</li>
<li>opad与$K^+$进行XOR生成b比特的分组$S_o$；</li>
<li>将步骤(4)产生的散列结果追加在$S_o$上；</li>
<li>将H应用于步骤6产生的数据流，输出结果；</li>
</ol>
<h5 id="基于分组密码的MAC—CMAC"><a href="#基于分组密码的MAC—CMAC" class="headerlink" title="基于分组密码的MAC—CMAC"></a>基于分组密码的MAC—CMAC</h5><ul>
<li><p>当消息长度是分组长度的整数倍时</p>
<p><img src="/imgs/iis/30.png" alt="image-20231021185226675"></p>
</li>
<li><p>当消息长度不是分组长度的整数倍时</p>
<p><img src="/imgs/iis/31.png" alt="image-20231021185259659"></p>
</li>
</ul>
<p><img src="/imgs/iis/32.png" alt="image-20231021185416402"></p>
<h3 id="数字签名技术"><a href="#数字签名技术" class="headerlink" title="数字签名技术"></a>数字签名技术</h3><p>数字签名是<strong>只有信息的发送者才能产生的别人无法伪造的一段数字串</strong>，这段数字串同时也是对信息的发送者发送信息真实性的一个有效证明。它是一种类似写在纸上的普通的物理签名，但是在使用了公钥加密领域的技术来实现的，用于鉴别数字信息的方法</p>
<p>要求：</p>
<ul>
<li>发方发出签名后的消息，就不能否认所签消息</li>
<li>收方能确认或证实发方的签字，但不能伪造</li>
<li>收方对已收到的消息不能否认</li>
<li>第三者可以确认收发双方之间的消息传送，但不能伪造这一过程</li>
</ul>
<p>应具有：</p>
<ul>
<li>必须能够验证签名者及其签名的日期时间</li>
<li>必须能够认证被签名消息的内容</li>
<li>签名必须能够由第三方验证，以解决争议</li>
</ul>
<p>两类数字签名函数</p>
<ul>
<li>直接数字签名<ul>
<li>仅涉及通信双方</li>
<li>有效性依赖发方密钥的安全性</li>
</ul>
</li>
<li>仲裁数字签名<ul>
<li>使用第三方认证</li>
</ul>
</li>
</ul>
<p>两种加密方法：</p>
<p><strong>利用发送方的私钥加密</strong></p>
<p><img src="/imgs/iis/33.png" alt="image-20231021190603255"></p>
<p><img src="/imgs/iis/35.png" alt="image-20231021190751442"></p>
<p><strong>利用发送方的私钥报文散列码加密</strong></p>
<p><img src="/imgs/iis/34.png" alt="image-20231021190653079"></p>
<p><img src="/imgs/iis/36.png" alt="image-20231021190822679"></p>
<h2 id="密钥管理技术"><a href="#密钥管理技术" class="headerlink" title="密钥管理技术"></a>密钥管理技术</h2><h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><p><strong>密钥长度</strong>与时间代价</p>
<p><strong>密钥生成</strong></p>
<p>方式一：用户自行设置，攻击者可以使用字典攻击</p>
<p>方式二：随机密钥，</p>
<p><strong>密钥使用</strong></p>
<p>使用软件加密</p>
<p>使用硬件加密</p>
<h3 id="对称密钥的管理"><a href="#对称密钥的管理" class="headerlink" title="对称密钥的管理"></a>对称密钥的管理</h3><p><strong>密钥分发技术</strong></p>
<p>传递密钥给希望交换数据的双方，不允许其他人看见密钥的方法</p>
<p>任何密码系统的强度取决于<strong>密钥分发技术</strong></p>
<p>分发技术：</p>
<ul>
<li><p>A能够选定密钥并通过物理方法传递给B</p>
</li>
<li><p>第三方C可以选定密钥并通过物理方法传递给A和B</p>
</li>
<li><p>如果A和B不久之前使用过一个密钥，一方能够把使用旧密钥加密的新密钥传递给另一方</p>
</li>
<li><p>A和B各自有一个到达第三方的加密链路，C能够在加密链路上传递密钥给A和B</p>
<p>需要两种密钥：</p>
<ul>
<li>会话密钥，一次性会话密钥加密，会话结束销毁</li>
<li>永久密钥，用于分发会话密钥</li>
</ul>
<p>需要一个<strong>密钥分发中心KDC</strong></p>
<ul>
<li>KDC在密钥分配过程中充当可信任的第三方</li>
<li>KDC保存有每个用户和KDC之间共享的唯一的密钥，以便进行分配</li>
<li>KDC按照需要生成各对端用户之间的会话密钥，并由用户和KDC共享的密钥进行加密，通过安全协议将会话密钥安全地传送给需要进行通信的双方</li>
</ul>
<p>KDC对称密钥分配方案</p>
<p>A与B双方在KDC中已保存了各自的基本密钥KA和KB</p>
<p>当双方进行通信前，应首先获得双方通信的会话密钥KS</p>
<p><img src="/imgs/iis/37.png" alt="image-20231027111631756"></p>
</li>
</ul>
<h3 id="公开密钥分配中心"><a href="#公开密钥分配中心" class="headerlink" title="公开密钥分配中心"></a>公开密钥分配中心</h3><h4 id="公开密钥分配方案"><a href="#公开密钥分配方案" class="headerlink" title="公开密钥分配方案"></a>公开密钥分配方案</h4><ul>
<li>所有用户的公开密钥由KDC统一管理</li>
<li>用户只需保存自己的秘密密钥和KDC的公开密钥</li>
<li>用户可通过KDC获得任何其他用户的公开密钥</li>
</ul>
<p><img src="/imgs/iis/38.png" alt="image-20231027112214534"></p>
<h3 id="公钥的密钥管理"><a href="#公钥的密钥管理" class="headerlink" title="公钥的密钥管理"></a>公钥的密钥管理</h3><p><img src="/imgs/iis/39.png" alt="image-20231027112341734"></p>
<p><img src="/imgs/iis/40.png" alt="image-20231027112412990"></p>
<p><img src="/imgs/iis/41.png" alt="image-20231027112440293"></p>
<p><img src="/imgs/iis/42.png" alt="image-20231027113831372"></p>
<h4 id="网络中公钥的获得"><a href="#网络中公钥的获得" class="headerlink" title="网络中公钥的获得"></a>网络中公钥的获得</h4><ol>
<li>从对方处获得</li>
<li>从可信的中央数据库获得</li>
<li>从自己的私人数据库获得</li>
</ol>
<h4 id="公钥证书"><a href="#公钥证书" class="headerlink" title="公钥证书"></a>公钥证书</h4><p>公钥证书又称CA证书、数字证书。它由可信赖的人或者机构(CA)签发,防止中间人攻击。</p>
<p>CA是负责签发证书、认证证书、管理已颁发证书的机关</p>
<p><strong>公钥证书签发</strong></p>
<p><img src="/imgs/iis/43.png" alt="image-20231103100513625"></p>
<p><img src="/imgs/iis/44.png" alt="image-20231103100544927"></p>
<p><img src="/imgs/iis/45.png" alt="image-20231103100636606"></p>
<p>X.509数字证书格式–V3</p>
<p><strong>公钥基础设施PKI</strong></p>
<p>PKI是生成,管理,存储,分发和吊销基于公钥密码学的公钥证书所需要的硬件,软件,人员,策略和规程的总和</p>
<p><strong>PKI基本组件</strong></p>
<p>PKI基本组件包括:注册机构RA,认证机构CA,证书库,密钥备份及恢复系统,证书撤消处理系统,PKI应用接口系统</p>
<p><strong>PKI包括的重要实体</strong></p>
<ol>
<li>证书权威CA：颁发证书和证书撤销链CRL</li>
<li>注册权威RA：向CA登记或担保一个最终用户的身份</li>
<li>证书库：存放证书和证书撤销链表CRL</li>
<li>策略管理权威PMA</li>
<li>终端用户EE</li>
</ol>
<p><strong>PKI运行流程</strong></p>
<p><img src="/imgs/iis/46.png" alt="image-20231103101738209"></p>
<p><img src="/imgs/iis/47.png" alt="image-20231103101807396"></p>
<p><strong>PKI运行实例</strong></p>
<p><img src="/imgs/iis/48.png" alt="image-20231103101859545"></p>
<p><img src="/imgs/iis/49.png" alt="image-20231103101921459"></p>
<p><img src="/imgs/iis/50.png" alt="image-20231103101949269"></p>
<p><img src="/imgs/iis/51.png" alt="image-20231103102012938"></p>
<h2 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h2><h3 id="用户认证基本概念"><a href="#用户认证基本概念" class="headerlink" title="用户认证基本概念"></a>用户认证基本概念</h3><h4 id="用户认证功能"><a href="#用户认证功能" class="headerlink" title="用户认证功能"></a>用户认证功能</h4><ol>
<li>用户通过一个凭证（例如用户ID）来向系统证明自身</li>
<li>系统核实用户身份，并授予相应权限</li>
</ol>
<h4 id="用户认证流程"><a href="#用户认证流程" class="headerlink" title="用户认证流程"></a>用户认证流程</h4><ul>
<li>识别步骤：向安全系统提供一个身份标识</li>
<li>认证步骤：提供或者产生认证信息，以证实实体与标识符之间的绑定关系</li>
</ul>
<h4 id="用户认证与消息认证区别"><a href="#用户认证与消息认证区别" class="headerlink" title="用户认证与消息认证区别"></a>用户认证与消息认证区别</h4><ul>
<li>消息认证：保证消息没有被更改且消息源真实</li>
<li>用户认证：用于系统识别用户的真实身份，同时提供给用户一个凭证</li>
</ul>
<h3 id="用户认证方法"><a href="#用户认证方法" class="headerlink" title="用户认证方法"></a>用户认证方法</h3><ul>
<li>基于个人所知道的信息：口令认证</li>
<li>基于个人所拥有的物品：令牌认证</li>
<li>基于个人生理特征：生物特征认证</li>
</ul>
<h4 id="口令认证"><a href="#口令认证" class="headerlink" title="口令认证"></a>口令认证</h4><p><strong>第一代密码</strong></p>
<p>系统数据库中存储登陆时的用户名及其对应的一个密码，使用明文存储</p>
<p>缺陷：数据库一旦泄露，所有用户名和密码都会泄露</p>
<p><strong>第二代密码</strong></p>
<p>在第一代密码的基础上采用散列函数加密，用户登陆时，将用户输入的密码执行加密算法后再和数据库对比</p>
<p>缺陷：一些简单口令仍可被破解</p>
<p><strong>第三代密码</strong></p>
<p>在第二代的基础上加入盐值；每个用户随机产生一个盐值，将密码+盐值使用散列函数加密后储存在数据库中</p>
<p><strong>盐值</strong>：在密码任意固定位置插入的特定的字符串，让加盐后的密码进行散列运算的结果和原始密码的散列运算结果不一致</p>
<p>使用了盐值的UNIX口令方案</p>
<p><img src="/imgs/iis/52.png" alt="image-20231103103717785"></p>
<p><strong>盐值的优点</strong></p>
<ul>
<li>即使是两个不同的用户选择了相同的口令。这些口令也会被分配不同的“盐值”；因此，这两个用户所持有的散列口令是不同的</li>
<li>它显著地增加了离线口令字典攻击的难度；对于一个b位长度的“盐值”，可能产生的口令数量将会增长2b倍，这大大增加通过字典攻击猜测口令的难度</li>
<li>它使得攻击者几乎不可能发现一个用户是否在两个或更多的系统中使用了相同的口令</li>
</ul>
<h4 id="令牌认证"><a href="#令牌认证" class="headerlink" title="令牌认证"></a>令牌认证</h4><h5 id="静态协议"><a href="#静态协议" class="headerlink" title="静态协议"></a>静态协议</h5><p>用户首先将自己与令牌绑定，再将令牌与系统用户绑定，即可通过令牌完成身份认证</p>
<h5 id="动态口令生成器"><a href="#动态口令生成器" class="headerlink" title="动态口令生成器"></a>动态口令生成器</h5><p>系统与令牌首先进行初始化并保持同步，每过一段时间令牌就会生成一段口令，该口令即可用于进行身份认证</p>
<h5 id="挑战-应答协议"><a href="#挑战-应答协议" class="headerlink" title="挑战-应答协议"></a>挑战-应答协议</h5><p>系统产生一个“挑战信号”，智能令牌基于该信号生成一个“应答信号”，从而完成身份验证（类似公钥加密机制）</p>
<h4 id="生物特征认证"><a href="#生物特征认证" class="headerlink" title="生物特征认证"></a>生物特征认证</h4><p>对于用户绑定的静态生物信息，如：面部特征，指纹，手型，视网膜模式，虹膜，签名等特征进行识别，从而完成用户认证</p>
<h3 id="用户认证过程中的安全问题"><a href="#用户认证过程中的安全问题" class="headerlink" title="用户认证过程中的安全问题"></a>用户认证过程中的安全问题</h3><h4 id="口令的脆弱性"><a href="#口令的脆弱性" class="headerlink" title="口令的脆弱性"></a>口令的脆弱性</h4><h5 id="离线字典攻击"><a href="#离线字典攻击" class="headerlink" title="离线字典攻击"></a>离线字典攻击</h5><p>攻击者通过绕过系统的访问控制机制，从而获得对常见口令的访问权，攻击者通过将一些常用的口令进行散列之后的结果与口令文件中的散列值进行比较，匹配时攻击者便可以登录到系统中</p>
<p>对策：</p>
<ul>
<li>修改一些不安全的口令;</li>
<li>防止非授权的对口令文件的访问；</li>
<li>使用入侵检测机制对危害系统的行为进行检测</li>
</ul>
<h5 id="特定账户攻击"><a href="#特定账户攻击" class="headerlink" title="特定账户攻击"></a>特定账户攻击</h5><p>攻击者把目标锁定为一个具体的账户，不断对其口令进行猜测</p>
<p>对策：</p>
<ul>
<li>采用账户锁定策略</li>
<li>口令尝试错误达到一定次数</li>
<li>对账户锁定</li>
</ul>
<h5 id="常用口令攻击"><a href="#常用口令攻击" class="headerlink" title="常用口令攻击"></a>常用口令攻击</h5><p>用常用的口令（如123456，adminadmin）对大量的用户ID进行尝试</p>
<p>对策：</p>
<ul>
<li>禁止用户使用常用的口令；</li>
<li>对请求者的IP地址和用户提交的cookie模式进行扫描</li>
</ul>
<h4 id="常用攻击方式"><a href="#常用攻击方式" class="headerlink" title="常用攻击方式"></a>常用攻击方式</h4><h5 id="客户端攻击"><a href="#客户端攻击" class="headerlink" title="客户端攻击"></a>客户端攻击</h5><p>在不访问远程主机的情况下，敌手伪装成一个合法用户来完成用户认证的攻击行为；<br>敌手可能会对口令进行多种猜解，如尝试所有可能的口令；阻止这种攻击的一种方法是选择既长又不可预测的口令（参考“口令的脆弱性”）</p>
<h5 id="重放攻击"><a href="#重放攻击" class="headerlink" title="重放攻击"></a>重放攻击</h5><p>攻击者发送一个目的主机已接收过的包，来达到欺骗系统的目的；<br>重放攻击可以由认证发起者或者拦截并重发该数据的敌方进行；攻击者利用网络监听或者其他方式盗取认证凭据，之后再把它重新发给认证服务器</p>
<h5 id="特洛伊木马攻击"><a href="#特洛伊木马攻击" class="headerlink" title="特洛伊木马攻击"></a>特洛伊木马攻击</h5><p>在特洛伊木马攻击中，敌手冒充成认证服务来捕获用户口令、验证码或生物特征信息；之后，敌手可以使用捕获到的信息冒充合法用户</p>
<h5 id="拒绝服务攻击"><a href="#拒绝服务攻击" class="headerlink" title="拒绝服务攻击"></a>拒绝服务攻击</h5><p>拒绝服务攻击是试图通过大规模的认证请求使认证服务失效</p>
<p><img src="/imgs/iis/53.png" alt="image-20231103112039314"></p>
<p><img src="/imgs/iis/54.png" alt="image-20231103112103783"></p>
<h3 id="基本认证方法"><a href="#基本认证方法" class="headerlink" title="基本认证方法"></a>基本认证方法</h3><h4 id="单向认证"><a href="#单向认证" class="headerlink" title="单向认证"></a>单向认证</h4><p>最简单的方式是A向B出示口令</p>
<p><strong>使用公钥的单向认证</strong></p>
<p><img src="/imgs/iis/55.png" alt="image-20231103112319312"></p>
<p><strong>使用对称加密方法的单向认证</strong></p>
<ul>
<li>A和B双方共享密钥，B向A发送一个明文R，A返回该明文对应的密文，从而确认A掌握密钥<ul>
<li>随机数据R每次不同，因此不能回放</li>
<li>A和B双方安全性相关，一方被攻破，另一方也不安全</li>
</ul>
</li>
</ul>
<p><strong>口令认证-Lamport散列函数</strong></p>
<ul>
<li><p>A存放</p>
<ul>
<li>散列函数$h(\cdot)$，用于登录B的password</li>
</ul>
</li>
<li><p>B存放</p>
<ul>
<li>散列函数$h(\cdot)$，A的用户名，整数n，将password散列n次的结果$hash^n$</li>
</ul>
</li>
<li><p>当A需要向B作身份认证时，B返回n的当前值</p>
</li>
<li><p>A计算$hasn^{n-1}$（password）并送给B</p>
</li>
<li><p>B将A返回的结果$hash^{n-1}$（password）再散列一次，与当前存储的散列值（$hash^{n-1}$（password））比较</p>
</li>
<li><p>若鉴别成功，则将$hash^{n-1}$（password）更新为当前的散列值，且n的值减1</p>
<ul>
<li>若n递减为1，则重新设置口令</li>
</ul>
</li>
</ul>
<p><img src="/imgs/iis/56.png" alt="image-20231103112837353"></p>
<p><strong>One-Time Password方法的问题</strong></p>
<p>小数攻击</p>
<p>若攻击者已知散列函数$h(\cdot)$且能拦截B的信息，则他可向A返回一个很小的m值，这样就能计算出从$hash^m$（password）到$hash^n$（password）的值，从而在n减少到m前可冒充A</p>
<p><img src="/imgs/iis/57.png" alt="image-20231103113416943"></p>
<h4 id="双向鉴别"><a href="#双向鉴别" class="headerlink" title="双向鉴别"></a>双向鉴别</h4><ul>
<li>对称密钥<ul>
<li>AB提出challenge</li>
<li>存在桥接攻击</li>
</ul>
</li>
<li>非对称密钥<ul>
<li>相互使用对方的公钥</li>
<li>公钥的真实性问题</li>
</ul>
</li>
<li>时标<ul>
<li>数据的时效性问题</li>
</ul>
</li>
</ul>
<h5 id="Key-Distribution-Center"><a href="#Key-Distribution-Center" class="headerlink" title="Key Distribution Center"></a>Key Distribution Center</h5><ul>
<li>承担一个Site的密钥集中管理工作</li>
<li>减轻端系统的密钥保管负担</li>
<li>有利于用户的移动</li>
<li>容易构成安全的瓶颈</li>
<li>Single Sign-On的概念</li>
</ul>
<h5 id="Needham-Schroeder方法"><a href="#Needham-Schroeder方法" class="headerlink" title="Needham-Schroeder方法"></a>Needham-Schroeder方法</h5><p><img src="/imgs/iis/58.png" alt="image-20231103113943855"></p>
<h5 id="Keberos认证"><a href="#Keberos认证" class="headerlink" title="Keberos认证"></a>Keberos认证</h5><p>整个方案就是一个可信任的第三方认证服务</p>
<p>要求用户调用每个服务时需要证明他的身份，并且可随意要求服务器向客户端证明它们的身份</p>
<p><strong>概述</strong></p>
<ol>
<li>$C \to AS:ID_C||P_C||ID_V$</li>
<li>$AS \to C:Ticket$</li>
<li>$C \to V:ID_C||Ticket$</li>
</ol>
<p>$Ticket&#x3D;E(K_v,[ID_C||AD_C||ID_V])$</p>
<ul>
<li>C&#x3D;客户端</li>
<li>AS&#x3D;认证服务器</li>
<li>V&#x3D;服务器</li>
<li>$ID_C$&#x3D;客户端上用户的身份标识</li>
<li>$ID_V$&#x3D;服务器的身份标识</li>
<li>$P_C$&#x3D;客户端上用户的口令</li>
<li>$AD_C$&#x3D;客户端的网络地址</li>
<li>$K_v$&#x3D;认证服务器和服务器间共享的加密密钥</li>
</ul>
<p><strong>一个更加安全的认证会话</strong></p>
<p>每次用户登录会话就执行一次：</p>
<ol>
<li>$C \to AS:ID_C||ID_{tgs}$</li>
<li>$AS \to C:E(K_C,Ticket_{tgs})$</li>
</ol>
<p>每种类型的服务各执行一次：</p>
<ol start="3">
<li>$C \to TGS:ID_C||ID_V||Ticket_{tgs}$</li>
<li>$TGS \to C:Ticket_v$</li>
</ol>
<p>每个服务会话执行一次：</p>
<ol start="5">
<li>$C \to V:ID_C||Ticket_v$</li>
</ol>
<ul>
<li>$Ticket_{tgs}&#x3D;E(K_{tgs},[ID_C||AD_C||ID_{tgs}||TS_1||Lifetime_1])$</li>
<li>$Ticket_{v}&#x3D;E(K_v,[ID_C||AD_C||ID_{v}||TS_2||Lifetime_2])$</li>
</ul>
<p><strong>Kerberos协议</strong></p>
<p>包括客户端、应用服务器和一个Kerberos服务器</p>
<ul>
<li>被设计用来对抗针对客户端&#x2F;服务器对话安全的多种威胁</li>
<li>很明显的安全性风险是伪装（impersonation）</li>
<li>服务器必须能确认请求服务的客户端的身份</li>
</ul>
<p>使用一个认证服务器(AS)</p>
<ul>
<li>用户登录AS进行身份验证</li>
<li>AS 验证用户的身份，然后把这个信息传送到一个应用服务器，这个应用服务器就将接受客户端的服务请求</li>
</ul>
<p>在一种安全的方式下完成上述工作</p>
<ul>
<li>如果客户端在网络上把用户口令发送到AS，敌手可以在网络上观测到用户的口令</li>
<li>敌手可以装扮成AS并发送一个假的确认消息</li>
</ul>
<p><img src="/imgs/iis/59.png" alt="image-20231110110400789"></p>
<p>注意:口令是集中存在Kerberos 服务器上的,不需在网络上传输</p>
<p><img src="/imgs/iis/60.png" alt="image-20231110110448700"></p>
<p>Kerberos域</p>
<p>一个Kerberos环境包括:</p>
<ul>
<li>一台Kerberos 服务器</li>
<li>若干客户端，都在Kerberos 服务器上注册</li>
<li>若干应用服务器，与服务器共享密钥</li>
</ul>
<p>这种环境被称为Kerberos域</p>
<ul>
<li>在不同管理组织下的客户端和服务器的网络通常组成不同的域</li>
</ul>
<p>如果有多个域：</p>
<ul>
<li>它们的Kerberos服务器必须共享一个密钥，并信任另一个域中的Kerberos服务器对其用户进行认证</li>
<li>在第二个域中参与的服务器也必须信任另一个域中Kerberos服务器</li>
</ul>
<p><img src="/imgs/iis/61.png" alt="image-20231110110715483"></p>
<h2 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h2><h3 id="访问控制原理"><a href="#访问控制原理" class="headerlink" title="访问控制原理"></a>访问控制原理</h3><p>访问控制是按用户身份及其归属的某项定义组来限制用户对某些信息项的访问，或限制对某些控制功能的使用的一种技术。</p>
<p><strong>广义的访问控制</strong></p>
<p><img src="/imgs/iis/62.png" alt="image-20231110112025786"></p>
<p><strong>狭义的访问控制</strong></p>
<p>访问控制实现的安全策略：指定对于每个具体的系统资源，谁或什么(如一个进程)可以访问</p>
<p>每个实例允许的访问类型</p>
<h3 id="访问控制策略"><a href="#访问控制策略" class="headerlink" title="访问控制策略"></a>访问控制策略</h3><h4 id="访问控制三要素"><a href="#访问控制三要素" class="headerlink" title="访问控制三要素"></a>访问控制三要素</h4><p><img src="/imgs/iis/63.png" alt="image-20231110112440120"></p>
<h4 id="访问控制策略-1"><a href="#访问控制策略-1" class="headerlink" title="访问控制策略"></a>访问控制策略</h4><h5 id="自主访问控制DAC"><a href="#自主访问控制DAC" class="headerlink" title="自主访问控制DAC"></a>自主访问控制DAC</h5><p>基于请求者的身份和访问规则（授权），规定请求者可以（或不可以）做什么。</p>
<p>一个实体可以被授权按其自己的意志使另一个实体能够访问某些资源。换句话说，拥有客体权限的用户，可以将该客体的权限分配给其他用户</p>
<p>例如：没有文件File1访问权限的用户可以从有访问权限的B 用户那里得到访问权限</p>
<p>DAC实现的通常方式是提供<strong>访问矩阵</strong></p>
<p>矩阵中的每项表示一个特定主体对一个特定客体的访问权。</p>
<p><img src="/imgs/iis/64.png" alt="image-20231110112803220"></p>
<p><strong>稀疏-权限控制列表ACL</strong> 不直观</p>
<p><img src="/imgs/iis/65.png" alt="image-20231110112925940"></p>
<p><img src="/imgs/iis/66.png" alt="image-20231110112942711"></p>
<p><strong>授权表</strong></p>
<p>授权表不像访问矩阵那么稀疏，但比ACL或能力表更为方便。</p>
<p><img src="/imgs/iis/67.png" alt="image-20231110113107881"></p>
<p><strong>一个DAC通用模型</strong></p>
<p><img src="/imgs/iis/68.png" alt="image-20231110113225182"></p>
<h5 id="强制访问控制MAC"><a href="#强制访问控制MAC" class="headerlink" title="强制访问控制MAC"></a>强制访问控制MAC</h5><p>通过比较具有安全许可的安全标记来控制访问。</p>
<p>强制访问控制模型(Mandatory Access Control),在计算机安全领域指一种由操作系统约束的访问控制</p>
<p>目标：限制主体或发起者访问或对对象或目标执行某种操作的能力。</p>
<p>主体对于对象的任何操作都将根据一组授权规则（也称策略）进行测试，由操作系统决定操作是否允许</p>
<ol>
<li>主体(Subject)被赋予一定的安全级别</li>
<li>客体(Object)被赋予一定的安全级别</li>
<li>Subject 能否访问Object 由双方的关系安全级别决定，这个判断通常由系统硬性限制</li>
</ol>
<p><img src="/imgs/iis/69.png" alt="image-20231110113528906"></p>
<p><strong>优点</strong></p>
<ul>
<li>系统独立于用户行为强制执行访问控制，用户不能改变他们的安全级别或对象的安全属性。</li>
<li>MAC安全性比DAC有了提高</li>
<li>非常适合机密机构或者其他等级观念强烈的行业</li>
</ul>
<p><strong>缺点</strong></p>
<p>过重强调保密性，管理不够灵活</p>
<h5 id="基于角色的访问控制RBAC"><a href="#基于角色的访问控制RBAC" class="headerlink" title="基于角色的访问控制RBAC"></a>基于角色的访问控制RBAC</h5><p>基于用户在系统中所具有的角色和说明各种角色用户享有哪些访问权的规则来控制访问</p>
<p>传统的DAC系统定义了单独的用户和用户组的访问权。与之相反，RBAC基于用户在系统中设定的角色而不是用户的身份</p>
<p><img src="/imgs/iis/70.png" alt="image-20231110113651063"></p>
<p><img src="/imgs/iis/71.png" alt="image-20231110113715515"></p>
<p><img src="/imgs/iis/72.png" alt="image-20231110113747475"></p>
<p>用户与角色的关系是多对多的，在某些环境下，用户集改变频繁，给一个用户分配一个或多个角色的方案可能也是动态的。</p>
<p>RBAC的访问矩阵</p>
<p><img src="/imgs/iis/73.png" alt="image-20231110113829861"></p>
<p>RBAC抽象模型</p>
<p><img src="/imgs/iis/74.png" alt="image-20231110113859025"></p>
<p>会话用来定义用户与该用户被分配的一个或多个角色之间的一对多的临时关系。用户仅与完成特定任务所必需的角色建立会话。这是最小特权概念的一个实例</p>
<p>RBAC模型作用域</p>
<p><img src="/imgs/iis/75.png" alt="image-20231110115820091"></p>
<p>RBAC的角色层次</p>
<p><img src="/imgs/iis/76.png" alt="image-20231110115919680"></p>
<p>RBAC的约束</p>
<p>约束是在角色之间定义的关系或与角色相关的条件，它提供了一种令RBAC适应组织中的管理和安全策略的细节的手段。</p>
<h5 id="基于属性的访问控制ABAC"><a href="#基于属性的访问控制ABAC" class="headerlink" title="基于属性的访问控制ABAC"></a>基于属性的访问控制ABAC</h5><p>基于用户、被访问资源及当前环境条件来控制访问</p>
<p><img src="/imgs/iis/77.png" alt="image-20231124101415470"></p>
<p><strong>属性</strong></p>
<p><img src="/imgs/iis/78.png" alt="image-20231124101542817"></p>
<p><strong>策略</strong></p>
<p><img src="/imgs/iis/79.png" alt="image-20231124101622501"></p>
<p><strong>架构</strong></p>
<p><img src="/imgs/iis/80.png" alt="image-20231124101847322"></p>
<p><strong>优势</strong></p>
<ul>
<li>正如我们之前提到的，ABAC方法的优势在于它的灵活性以及表达能力</li>
<li>ABAC系统能够实现DAC、RBAC和MAC的思想。</li>
<li>ABAC允许无限数量的属性组合起来以满足任何访问控制规则，能够实现细粒度的访问控制，能满足来自基本访问控制列表的各种各样的要求</li>
</ul>
<p><strong>障碍</strong></p>
<ul>
<li>需要考虑每次访问资源和对用户属性的评价所造成的性能影响。</li>
<li>然而，对于某些应用诸如Web服务和云计算的综合运用来说，每次访问所增加的代价相对于原本就相当高的性能代价是微不足道的。</li>
<li>因而，Web服务是实现ABAC模型的开创性技术，尤其是引入了可扩展的访问控制标记语言，并且也有人对将ABAC模型应用到云服务表现出相当大的兴趣。</li>
</ul>
<h2 id="数据库安全"><a href="#数据库安全" class="headerlink" title="数据库安全"></a>数据库安全</h2><h3 id="SQL注入攻击"><a href="#SQL注入攻击" class="headerlink" title="SQL注入攻击"></a>SQL注入攻击</h3><p>SQLi</p>
<p>利用Web应用的页面特征，发送恶意的SQL命令到数据库服务器</p>
<p>可用于</p>
<ul>
<li>修改或删除数据</li>
<li>执行任意的操作系统命令</li>
<li>发起拒绝服务(DoS)攻击</li>
</ul>
<p><img src="/imgs/iis/81.png" alt="image-20231124102454894"></p>
<p>从上向下：</p>
<ul>
<li>攻击者找到Web应用的脆弱点，向Web服务器发送命令</li>
<li>Web服务器将收到恶意代码发送给Web应用服务器</li>
<li>Web应用服务器将收到恶意代码发送给数据库服务器</li>
</ul>
<p>从下向上：</p>
<ul>
<li>Web服务器向攻击者发送信用卡详细信息。</li>
<li>Web应用服务器生成一个包含数据库信用卡表详细信息的页面。</li>
<li>数据库服务器在数据库上执行恶意代码，从信用卡表中返回数据。</li>
</ul>
<h4 id="注入技术"><a href="#注入技术" class="headerlink" title="注入技术"></a>注入技术</h4><p>SQLi攻击的方法通常是在SQL语句中提前终止文本串，随后附加新的命令代码。</p>
<p><img src="/imgs/iis/82.png" alt="image-20231124103029480"></p>
<p>同时，攻击者利用注释符“–”来终止被注入的代码段，使得后面的代码在执行时被忽略。</p>
<p><img src="/imgs/iis/83.png" alt="image-20231124103122918"></p>
<p><strong>实例</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users
<span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'&#123;0&#125;'</span>
<span class="token operator">and</span> password<span class="token operator">=</span><span class="token string">'&#123;1&#125;'</span>
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> username<span class="token operator">=</span><span class="token string">"test' OR 1=1 --"</span>"
<span class="token class-name">String</span> password<span class="token operator">=</span><span class="token string">"abcdefg"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>单引号将用户名字符串提前结束</p>
<p>所有记录都匹配到了该选择条件</p>
<p>用户将被允许登录到系统，尽管它没有输入正确的用户名密码，甚至连数据库中有哪些有效的用户名都不需要知道</p>
<p><strong>原因</strong></p>
<ul>
<li>对用户输入数据的过分信任，导致用户有机会输入恶意的代码</li>
<li>数据和操作逻辑没有隔离，本应该是数据的内容最终变成了可执行的语句，并改变了原有的执行逻辑</li>
</ul>
<h3 id="SQLi攻击方式"><a href="#SQLi攻击方式" class="headerlink" title="SQLi攻击方式"></a>SQLi攻击方式</h3><h4 id="SQLi攻击途径"><a href="#SQLi攻击途径" class="headerlink" title="SQLi攻击途径"></a>SQLi攻击途径</h4><p><img src="/imgs/iis/84.png" alt="image-20231124103931970"></p>
<p><img src="/imgs/iis/85.png" alt="image-20231124104013069"></p>
<h4 id="SQLi攻击方式-1"><a href="#SQLi攻击方式-1" class="headerlink" title="SQLi攻击方式"></a>SQLi攻击方式</h4><h5 id="带内攻击"><a href="#带内攻击" class="headerlink" title="带内攻击"></a>带内攻击</h5><p>带内攻击使用同样的通信通道来完成注入SQL码和结果返回</p>
<p><img src="/imgs/iis/86.png" alt="image-20231124104253761"></p>
<ol>
<li><p>行尾注释</p>
<p>在注入代码到特定字段之后，字段之后的合法代码会被注释标记为空字段。</p>
</li>
<li><p>捎带查询</p>
<p>攻击者在原本的查询语句之外还插入附加的查询。</p>
</li>
<li><p>重言式</p>
<p>将代码注入一个或多个永真的条件表达式中</p>
</li>
</ol>
<h5 id="推理攻击"><a href="#推理攻击" class="headerlink" title="推理攻击"></a>推理攻击</h5><p>推理攻击没有实际的数据传输，但攻击者能够通过发送特定的请求和观察网站和数据库服务器的响应规律来重新构造信息</p>
<ol>
<li><p>攻击者不断试错，通过反馈的错误信息将关于Web应用程序和数据库后端的类型和结构等重要信息收集起来，从而为以后攻击的做准备。</p>
<p><img src="/imgs/iis/87.png" alt="image-20231124105622552"></p>
</li>
<li><p>攻击者发送大量请求，当注入表达式为真时，网站正常运行</p>
<p>当注入表达式为假时，虽然没有描述性的错误语句，错误页面和正常页面还是有明显区别的。</p>
<p>攻击者可以根据表达式的真假推测数据库系统中的数据</p>
<p><img src="/imgs/iis/88.png" alt="image-20231124105710356"></p>
</li>
</ol>
<p><img src="/imgs/iis/89.png" alt="image-20231124105741626"></p>
<p><strong>使用检测防范推理攻击</strong></p>
<ol>
<li><p>数据库设计时的推理检测</p>
<p>通过修改数据库结构或改变访问控制机制等手段消除推理通道，从而防止推理</p>
<p>将一个表分成多个表以除去数据依赖</p>
<p>缺点：这类技术常常导致不必要的更严格的访问控制，从而降低了可用性。</p>
</li>
<li><p>查询时的推理检测</p>
<p>这种方法寻求在一个查询或一系列查询执行期间消除推理通道违例。</p>
<p>如果发现了推理通道，那个查询就被拒绝或修改。</p>
</li>
</ol>
<h5 id="带外攻击"><a href="#带外攻击" class="headerlink" title="带外攻击"></a>带外攻击</h5><p>在带外攻击中，返回数据使用不同的通信频道</p>
<p><img src="/imgs/iis/90.png" alt="image-20231124110348011"></p>
<p>比如一个带有查询结果的Email生成和返回是在不同的信道进的</p>
<p>这一方式可以用于信息检索有限制但数据库服务器带外连接不严格的情况</p>
<h4 id="SQLi的防范"><a href="#SQLi的防范" class="headerlink" title="SQLi的防范"></a>SQLi的防范</h4><h5 id="防御性编码"><a href="#防御性编码" class="headerlink" title="防御性编码"></a>防御性编码</h5><ul>
<li><p>手动防御性编码实践</p>
<p>例如：进行输入类型的检查</p>
</li>
<li><p>参数化查询插入</p>
<p>分离传递值参数</p>
</li>
<li><p>SQL DOM<br>SQL DOM是一组保证自动数据有效和转义的类</p>
</li>
</ul>
<h5 id="检测"><a href="#检测" class="headerlink" title="检测"></a>检测</h5><ul>
<li><p>基于特征</p>
<p>匹配特定的攻击模式</p>
</li>
<li><p>基于异常</p>
<p>定义正常行为模式，检测超出行为模式范围的情况</p>
</li>
<li><p>代码分析</p>
<p>一个测试套件，它成能够生成许多攻击，并评估系统的响应</p>
</li>
</ul>
<h5 id="运行时阻断"><a href="#运行时阻断" class="headerlink" title="运行时阻断"></a>运行时阻断</h5><p>若查询与期望的不一致，则阻断。</p>
<h5 id="数据库加密"><a href="#数据库加密" class="headerlink" title="数据库加密"></a>数据库加密</h5><p><img src="/imgs/iis/91.png" alt="image-20231124110738593"></p>
<p>加密是数据库安全的最后一道防线，它可以在记录级（加密选定的记录），属性级（加密选定的列）或单个字段级运用到整个数据库。</p>
<p><strong>缺点</strong></p>
<ol>
<li>密钥管理：授权用户必须能够访问其被允许访问的数据的解密密钥</li>
<li>不灵活：当数据库的部分或全部被加密时，执行记录搜索变得更为困难</li>
</ol>
<p><img src="/imgs/iis/92.png" alt="image-20231124110831706"></p>
<h2 id="恶意软件"><a href="#恶意软件" class="headerlink" title="恶意软件"></a>恶意软件</h2><h3 id="恶意软件的概念"><a href="#恶意软件的概念" class="headerlink" title="恶意软件的概念"></a>恶意软件的概念</h3><p>一种被（往往是秘密地）植入系统中，以损害受害者数据、应用程序或操作系统的可信性、完整性或可用性，抑或对用户实施骚扰或妨碍的程序</p>
<p><img src="/imgs/iis/93.png" alt="image-20231124110923638"></p>
<p><img src="/imgs/iis/94.png" alt="image-20231124110943882"></p>
<p><img src="/imgs/iis/95.png" alt="image-20231124111000407"></p>
<h3 id="恶意软件的类型"><a href="#恶意软件的类型" class="headerlink" title="恶意软件的类型"></a>恶意软件的类型</h3><h4 id="恶意软件的分类方法"><a href="#恶意软件的分类方法" class="headerlink" title="恶意软件的分类方法"></a>恶意软件的分类方法</h4><p><img src="/imgs/iis/96.png" alt="image-20231124111303616"></p>
<p>有效的分类方法</p>
<p><img src="/imgs/iis/97.png" alt="image-20231124111354527"></p>
<h4 id="恶意软件的传播机制"><a href="#恶意软件的传播机制" class="headerlink" title="恶意软件的传播机制"></a>恶意软件的传播机制</h4><ol>
<li>对现有可执行程序的感染或由病毒翻译并随后传播至其他系统。</li>
<li>利用软件漏洞（无论是从本地发起或借助蠕虫、夹带式下载等方式从网络发起）来允许恶意软件自我复制</li>
<li>借助社会工程学方法说服用户绕过安全机制来安装木马或响应网络钓鱼</li>
</ol>
<h4 id="恶意软件的有效负荷"><a href="#恶意软件的有效负荷" class="headerlink" title="恶意软件的有效负荷"></a>恶意软件的有效负荷</h4><ol>
<li>污染系统或数据文件</li>
<li>窃取服务使系统成为僵尸网络中的一个僵尸代理</li>
<li>窃取系统信息，以及登录口令和通过键盘记录器或间谍软件获取的隐私信息</li>
<li>隐蔽恶意软件的存在</li>
</ol>
<h3 id="恶意软件的来源"><a href="#恶意软件的来源" class="headerlink" title="恶意软件的来源"></a>恶意软件的来源</h3><h4 id="攻击工具包"><a href="#攻击工具包" class="headerlink" title="攻击工具包"></a>攻击工具包</h4><h4 id="攻击源"><a href="#攻击源" class="headerlink" title="攻击源"></a>攻击源</h4><h4 id="高级持续性威胁"><a href="#高级持续性威胁" class="headerlink" title="高级持续性威胁"></a>高级持续性威胁</h4><p><img src="/imgs/iis/98.png" alt="image-20231124111822452"></p>
<h3 id="恶意软件的传染机制"><a href="#恶意软件的传染机制" class="headerlink" title="恶意软件的传染机制"></a>恶意软件的传染机制</h3><h4 id="移动代码"><a href="#移动代码" class="headerlink" title="移动代码"></a>移动代码</h4><p>移动代码能够从远程系统传送到本地系统，无需用户明确许可便开始运行，进而利用漏洞实现某些功能，例如非授权的数据访问或特权攻击。</p>
<h4 id="病毒"><a href="#病毒" class="headerlink" title="病毒"></a>病毒</h4><p>在被感染的主程序运行时，病毒可以秘密执行主程序被允许执行的任何操作。</p>
<p><img src="/imgs/iis/99.png" alt="image-20231124111942098"></p>
<p><img src="/imgs/iis/100.png" alt="image-20231124112015274"></p>
<p><img src="/imgs/iis/101.png" alt="image-20231124112045192"></p>
<p><img src="/imgs/iis/102.png" alt="image-20231124112110105"></p>
<p><img src="/imgs/iis/103.png" alt="image-20231124112132437"></p>
<p><img src="/imgs/iis/104.png" alt="image-20231124112425985"></p>
<p><img src="/imgs/iis/105.png" alt="image-20231124112450494"></p>
<p><img src="/imgs/iis/106.png" alt="image-20231124112522967"></p>
<p><img src="/imgs/iis/107.png" alt="image-20231124112551747"></p>
<h4 id="蠕虫"><a href="#蠕虫" class="headerlink" title="蠕虫"></a>蠕虫</h4><p>蠕虫是一种主动寻找并感染其他机器的程序，而每台被感染机器又转而成为自动攻击其他机器的跳板。</p>
<p><img src="/imgs/iis/108.png" alt="image-20231124112721047"></p>
<h5 id="蠕虫复制"><a href="#蠕虫复制" class="headerlink" title="蠕虫复制"></a>蠕虫复制</h5><p>为了复制自身，蠕虫利用如下方法来访问远程系统</p>
<ul>
<li><p>电子邮件或即时通讯工具</p>
<p>蠕虫通过邮件发送自己的拷贝，或将自身当作即时通信服务的附件发送。当打开电子邮件或附件时，蠕虫的代码就会被执行。</p>
</li>
<li><p>文件共享</p>
<p>蠕虫可以在如USB设备等可插拔媒介上创建自己的拷贝，或像病毒那样感染此类媒介上适合的文件。</p>
</li>
</ul>
<p><img src="/imgs/iis/109.png" alt="image-20231124112841059"></p>
<h5 id="蠕虫的扫描策略"><a href="#蠕虫的扫描策略" class="headerlink" title="蠕虫的扫描策略"></a>蠕虫的扫描策略</h5><p>网络蠕虫在传播阶段的首要功能是寻找其他系统进行感染，这个过程叫作扫描(scanning)或指纹采集（fingerprinting)。</p>
<ul>
<li><p>随机式探索</p>
<p>每一台被感染的主机使用不同的种子探测IP地址空间的随机地址，会产生大量的网络流量，可能导致在实际攻击开展前，操作便会被中断</p>
</li>
<li><p>拓扑式探索</p>
<p>利用被感染机器中所包含的信息来寻找和扫描更多的主机。</p>
</li>
<li><p>黑名单</p>
<p>攻击者首先为潜在的易感染机器列出一个大名单，这是一个非常慢的过程，可以避免被检测到攻击正在进行</p>
<p>一旦名单编辑完成，每个被感染的机器会被分配名单中的一部分进行扫描，这种分工明确的扫描时间非常短，因此检测感染的发生是非常困难的</p>
</li>
<li><p>本地子网</p>
<p>如果防火墙后的一台主机被感染，则该主机会在其所在的本地网络中寻找到其他本应受到防火墙保护的主机</p>
</li>
</ul>
<p><img src="/imgs/iis/110.png" alt="image-20231124113118265"></p>
<h5 id="Morris蠕虫"><a href="#Morris蠕虫" class="headerlink" title="Morris蠕虫"></a>Morris蠕虫</h5><p><img src="/imgs/iis/111.png" alt="image-20231124113210900"></p>
<p><img src="/imgs/iis/112.png" alt="image-20231124113236032"></p>
<h5 id="最近的蠕虫攻击"><a href="#最近的蠕虫攻击" class="headerlink" title="最近的蠕虫攻击"></a>最近的蠕虫攻击</h5><h5 id="手机蠕虫"><a href="#手机蠕虫" class="headerlink" title="手机蠕虫"></a>手机蠕虫</h5><p><img src="/imgs/iis/113.png" alt="image-20231124113322099"></p>
<h4 id="夹带式下载"><a href="#夹带式下载" class="headerlink" title="夹带式下载"></a>夹带式下载</h4><p><img src="/imgs/iis/114.png" alt="image-20231124113410072"></p>
<h4 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h4><p><img src="/imgs/iis/115.png" alt="image-20231124113438609"></p>
<h4 id="社会工程学"><a href="#社会工程学" class="headerlink" title="社会工程学"></a>社会工程学</h4><p><img src="/imgs/iis/116.png" alt="image-20231124113508886"></p>
<p><img src="/imgs/iis/117.png" alt="image-20231124113538158"></p>
<h3 id="恶意软件的载荷"><a href="#恶意软件的载荷" class="headerlink" title="恶意软件的载荷"></a>恶意软件的载荷</h3><h4 id="系统损坏"><a href="#系统损坏" class="headerlink" title="系统损坏"></a>系统损坏</h4><p><img src="/imgs/iis/118.png" alt="image-20231124114705918"></p>
<p><img src="/imgs/iis/119.png" alt="image-20231124114745768"></p>
<h4 id="攻击代理"><a href="#攻击代理" class="headerlink" title="攻击代理"></a>攻击代理</h4><p><img src="/imgs/iis/120.png" alt="image-20231124114957315"></p>
<p><img src="/imgs/iis/121.png" alt="image-20231124115028791"></p>
<p><img src="/imgs/iis/122.png" alt="image-20231124115050796"></p>
<h4 id="信息窃取"><a href="#信息窃取" class="headerlink" title="信息窃取"></a>信息窃取</h4><p><img src="/imgs/iis/123.png" alt="image-20231124115216230"></p>
<p><img src="/imgs/iis/124.png" alt="image-20231124115245730"></p>
<h4 id="网络钓鱼"><a href="#网络钓鱼" class="headerlink" title="网络钓鱼"></a>网络钓鱼</h4><p><img src="/imgs/iis/125.png" alt="image-20231124115312811"></p>
<h4 id="隐蔽后门"><a href="#隐蔽后门" class="headerlink" title="隐蔽后门"></a>隐蔽后门</h4><p><img src="/imgs/iis/126.png" alt="image-20231124115339230"></p>
<p><img src="/imgs/iis/127.png" alt="image-20231124115400326"></p>
<h4 id="隐蔽rootkit"><a href="#隐蔽rootkit" class="headerlink" title="隐蔽rootkit"></a>隐蔽rootkit</h4><p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20231124115623526.png" alt="image-20231124115623526"></p>
<h3 id="恶意软件的对抗措施"><a href="#恶意软件的对抗措施" class="headerlink" title="恶意软件的对抗措施"></a>恶意软件的对抗措施</h3><p>预防为主</p>
<ul>
<li><p>规则</p>
</li>
<li><p>警惕性</p>
</li>
<li><p>弥补弱点</p>
</li>
<li><p>缓解威胁</p>
</li>
</ul>
<p><img src="/imgs/iis/128.png" alt="image-20231124115733289"></p>
<p>反病毒软件的发展</p>
<ol>
<li><p>简单的扫描器</p>
<ul>
<li>基于病毒特征码来识别病毒</li>
<li>通过检査文件长度变化来检测病毒</li>
</ul>
<p>缺点：仅局限于检测已知病毒</p>
</li>
<li><p>启发式扫描器</p>
<ul>
<li><p>通过启发式规则来检测可能存在的病毒感染；</p>
<p>例如：通过搜索经常与病毒关联的代码段来检测病毒</p>
</li>
<li><p>完整性检测：每个程序都被附加一个校验和，如果病毒感染了程序但没有修改程序后面附加的校验和，完整性检测就能发现病毒对文件的修改。</p>
</li>
</ul>
</li>
<li><p>活动陷阱</p>
<p>一种内存驻留程序，它通过病毒行为来识别病毒而不是通过被感染文件的内部结构特征。</p>
<p>优点：不用为大量的病毒生成特征码和启发式规则。它只需要去识别一小部分预示病毒想要感染的行为，然后阻止这些行为。</p>
</li>
<li><p>全面保护</p>
<p>综合运用各种反病毒技术的软件包，包括扫描和活动陷阱组件。同时还加入了访问控制功能，从而限制了病毒对系统渗透的能力，也就限制了病毒修改文件以继续传播的能力。</p>
</li>
</ol>
<h2 id="拒绝服务攻击-1"><a href="#拒绝服务攻击-1" class="headerlink" title="拒绝服务攻击"></a>拒绝服务攻击</h2><h3 id="拒绝服务攻击-2"><a href="#拒绝服务攻击-2" class="headerlink" title="拒绝服务攻击"></a>拒绝服务攻击</h3><p>拒绝服务(DoS)是一种通过耗尽系统资源，来削弱或阻止对网络、系统或应用程序的正常使用的行为</p>
<p>目标资源</p>
<ul>
<li>网络带宽</li>
<li>系统资源</li>
<li>应用资源</li>
</ul>
<h4 id="经典的拒绝服务攻击"><a href="#经典的拒绝服务攻击" class="headerlink" title="经典的拒绝服务攻击"></a>经典的拒绝服务攻击</h4><h5 id="泛洪攻击"><a href="#泛洪攻击" class="headerlink" title="泛洪攻击"></a>泛洪攻击</h5><p>洪泛攻击的目的就是占据所有到目标组织的网络连接的容量</p>
<p><img src="/imgs/iis/129.png" alt="image-20231124140348089"></p>
<h5 id="源地址欺骗"><a href="#源地址欺骗" class="headerlink" title="源地址欺骗"></a>源地址欺骗</h5><p>产生大量目的地址指向被攻击系统的数据包，但这些数据包的源地址是随机的</p>
<p>洪泛攻击发送数据包的源地址很容易被识别，从而定位到攻击者真实的IP地址</p>
<p>使用原始套接字接口伪造源地址，使得攻击者难以被定位</p>
<p><img src="/imgs/iis/130.png" alt="image-20231124140500032"></p>
<h5 id="SYN欺骗"><a href="#SYN欺骗" class="headerlink" title="SYN欺骗"></a>SYN欺骗</h5><ul>
<li>利用TCP三次握手协议进行攻击</li>
<li>通过发送大量伪造源地址的SYN连接请求数据包，使服务器上用于管理TCP连接的连接表溢出，从而使正常用户无法建立连接</li>
</ul>
<p><img src="/imgs/iis/131.png" alt="image-20231124140617805"></p>
<p><img src="/imgs/iis/132.png" alt="image-20231124140657734"></p>
<h3 id="泛洪攻击-1"><a href="#泛洪攻击-1" class="headerlink" title="泛洪攻击"></a>泛洪攻击</h3><ul>
<li>根据攻击所使用的网络协议不同进行分类</li>
<li>其目的大都是使到服务器的链路超负荷</li>
<li>几乎任何类型的网络数据包都可以用来进行洪泛攻击</li>
</ul>
<h4 id="ICMP泛洪"><a href="#ICMP泛洪" class="headerlink" title="ICMP泛洪"></a>ICMP泛洪</h4><ul>
<li>利用ICMP回送请求数据包的ping洪泛攻击</li>
<li>ping是一种很有用的网络分析工具，网络管理员一般允许ICMP回送请求数据包进入他们的网络</li>
</ul>
<h4 id="UDP泛洪"><a href="#UDP泛洪" class="headerlink" title="UDP泛洪"></a>UDP泛洪</h4><ul>
<li>使用指向目标系统上某个端口号的UDP数据包洪泛</li>
<li>几乎任何UDP端口号都可以作为目标</li>
</ul>
<h4 id="TCP-SYN泛洪"><a href="#TCP-SYN泛洪" class="headerlink" title="TCP SYN泛洪"></a>TCP SYN泛洪</h4><ul>
<li>发送TCP数据包给目标系统</li>
<li>攻击的对象是数据包的总量而不是目标系统上的网络处理程序</li>
</ul>
<h3 id="分布式拒绝服务攻击"><a href="#分布式拒绝服务攻击" class="headerlink" title="分布式拒绝服务攻击"></a>分布式拒绝服务攻击</h3><p>攻击者首先通过操作系统上或者某些常用应用程序的一些熟知的漏洞来获得访问这些系统的权限（僵尸机）</p>
<p><img src="/imgs/iis/133.png" alt="image-20231124141128450"></p>
<h3 id="基于HTTP协议的攻击"><a href="#基于HTTP协议的攻击" class="headerlink" title="基于HTTP协议的攻击"></a>基于HTTP协议的攻击</h3><h4 id="HTTP泛洪攻击"><a href="#HTTP泛洪攻击" class="headerlink" title="HTTP泛洪攻击"></a>HTTP泛洪攻击</h4><ul>
<li>利用来自很多僵尸机的HTTP请求攻击web服务器，每个请求都消耗大量资源</li>
<li>递归HTTP洪泛（爬虫）：从给定的web服务器出发，遍历其所有链接并发送请求</li>
</ul>
<p><img src="/imgs/iis/134.png" alt="image-20231124141406111"></p>
<h4 id="Slowloris"><a href="#Slowloris" class="headerlink" title="Slowloris"></a>Slowloris</h4><p>通过不完整的HTTP请求占用服务器资源</p>
<ul>
<li>利用服务器收到完整请求响应的特性</li>
<li>服务器接收到不完整请求会将该连接保持，期待收到更多信息以完成这个请求，这一过程会占用服务器的计算资源</li>
<li>通过发送多个不完整请求，并周期性的发送新包将其保持，消耗服务器的计算资源</li>
</ul>
<h3 id="反射攻击与放大攻击"><a href="#反射攻击与放大攻击" class="headerlink" title="反射攻击与放大攻击"></a>反射攻击与放大攻击</h3><h4 id="反射攻击"><a href="#反射攻击" class="headerlink" title="反射攻击"></a>反射攻击</h4><p>中间媒介一般为高性能网络服务器（如DNS服务器），这意味着可以通过中间媒介形成很高的网络通信流量</p>
<p>攻击者将其想攻击的目标系统地址作为数据包的源地址，并将这些数据包发送给中间媒介</p>
<p>当中间媒介响应时，大量的响应数据包会被发送给源地址所指向的目标系统</p>
<p><img src="/imgs/iis/135.png" alt="image-20231124141648131"></p>
<h4 id="DNS放大攻击"><a href="#DNS放大攻击" class="headerlink" title="DNS放大攻击"></a>DNS放大攻击</h4><ul>
<li>使用了直接指向合法DNS服务器的数据包进行攻击</li>
<li>将DNS服务器作为中间媒介</li>
<li>利用DNS协议将较小的请求数据包转化为较大的响应数据包而达到攻击效果</li>
<li>目标系统被这些响应流量所洪泛</li>
</ul>
<h3 id="防范拒绝服务攻击"><a href="#防范拒绝服务攻击" class="headerlink" title="防范拒绝服务攻击"></a>防范拒绝服务攻击</h3><h4 id="网络输入过滤"><a href="#网络输入过滤" class="headerlink" title="网络输入过滤"></a>网络输入过滤</h4><ul>
<li>在尽可能靠近源地址的地安装方过滤器，以此限制主机系统发送带有虚假源地址数据包</li>
<li>使用过滤器来确认源地址所指向的返回路径是当前数据包发送过来所使用的路径</li>
</ul>
<h4 id="改进网络协议"><a href="#改进网络协议" class="headerlink" title="改进网络协议"></a>改进网络协议</h4><p>使用改进版本的TCP连接处理程序来抵御SYN欺骗攻击</p>
<h4 id="主动判断"><a href="#主动判断" class="headerlink" title="主动判断"></a>主动判断</h4><ul>
<li>主动判断数据包是否来自合法的、人工发起的交互，还是自动的DOS攻击</li>
<li>屏蔽可疑服务以及定向IP广播</li>
</ul>
<h3 id="对拒绝服务攻击的响应"><a href="#对拒绝服务攻击的响应" class="headerlink" title="对拒绝服务攻击的响应"></a>对拒绝服务攻击的响应</h3><h4 id="判断出攻击类型"><a href="#判断出攻击类型" class="headerlink" title="判断出攻击类型"></a>判断出攻击类型</h4><ul>
<li>数据包的捕获和分析</li>
<li>配置过滤器来过滤掉上游的攻击数据包</li>
<li>识别并纠正系统&#x2F;应用程序错误</li>
</ul>
<h4 id="通过服务供应商追踪攻击数据包流确定攻击源"><a href="#通过服务供应商追踪攻击数据包流确定攻击源" class="headerlink" title="通过服务供应商追踪攻击数据包流确定攻击源"></a>通过服务供应商追踪攻击数据包流确定攻击源</h4><ul>
<li>可能很困难，而且非常耗时</li>
<li>如果希望将攻击报告给相关的执法部门，这是必要的</li>
</ul>
<h4 id="攻击分析和更新应急计划"><a href="#攻击分析和更新应急计划" class="headerlink" title="攻击分析和更新应急计划"></a>攻击分析和更新应急计划</h4><p><strong>实施应急计划</strong></p>
<p>切换到备份服务器，用新的服务器建立具有新地址的新站点</p>
<p><strong>更新事故应变计划</strong></p>
<p>攻击分析和响应，并从经验中吸取教训以改进今后的处理措施</p>
<h2 id="入侵检测"><a href="#入侵检测" class="headerlink" title="入侵检测"></a>入侵检测</h2><h3 id="入侵者"><a href="#入侵者" class="headerlink" title="入侵者"></a>入侵者</h3><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li>网络罪犯</li>
<li>活动家</li>
<li>国家资助的组织</li>
<li>其他入侵者</li>
<li>学徒</li>
<li>训练有素者</li>
<li>高手</li>
</ul>
<h4 id="入侵者行为"><a href="#入侵者行为" class="headerlink" title="入侵者行为"></a>入侵者行为</h4><p>入侵者的技术和行为模式总是在不断变化，目的是利用新发现的系统弱点并躲避检测和相应的应对策略，通常使用以下步骤发起攻击</p>
<h5 id="锁定目标和收集信息"><a href="#锁定目标和收集信息" class="headerlink" title="锁定目标和收集信息"></a>锁定目标和收集信息</h5><p>攻击者利用公开的可用信息，通过技术和非技术手段，发现待攻击的目标系统，归纳其特征，并且利用网络探测工具确定目标资源的位置</p>
<h5 id="获取访问权限"><a href="#获取访问权限" class="headerlink" title="获取访问权限"></a>获取访问权限</h5><p>通常是利用远程网络漏洞，以及在远程服务中使用的弱认证证书，或者是利用在目标系统上安装恶意软件</p>
<h5 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h5><p>通常是利用远程网络漏洞，以及在远程服务中使用的弱认证证书，或者是利用在目标系统上安装恶意软件</p>
<h5 id="信息收集或者系统漏洞利用"><a href="#信息收集或者系统漏洞利用" class="headerlink" title="信息收集或者系统漏洞利用"></a>信息收集或者系统漏洞利用</h5><p>访问或者修改目标系统中的信息或者资源，或者从目标系统导航到另一个目标系统。</p>
<h5 id="维持访问权限"><a href="#维持访问权限" class="headerlink" title="维持访问权限"></a>维持访问权限</h5><p>攻击者安装后门或者其他恶意软件，或者改变认证证书，或者改变系统的其他配置，从而使攻击者在首次获得访问权限后，可以保证其拥有后续的长期访问权限。</p>
<h4 id="入侵实例"><a href="#入侵实例" class="headerlink" title="入侵实例"></a>入侵实例</h4><ul>
<li>远程获得电子邮件服务器超级用户(root)权限。</li>
<li>破坏Web服务器。</li>
<li>猜测和破解密码。</li>
<li>复制一个存有信用卡账号的数据库。</li>
<li>在未授权的情况下浏览敏感数据，包括工资记录和医疗信息等。</li>
<li>在工作站上运行数据包嗅探器来捕获用户名和密码。</li>
<li>利用匿名FTP服务器的权限错误( permIssionerror)发送盗版的软件和音乐文件。</li>
<li>拨号到一个不安全的调制解调器，以获得内网的访问权限。</li>
<li>伪装成管理人员，呼叫帮助平台，重置该管理人员的电子邮件口令并学习新的口令。</li>
<li>在未授权的情况下使用一个无人值守的已登录的工作站。</li>
</ul>
<p><img src="/imgs/iis/136.png" alt="image-20231201101402063"></p>
<p><img src="/imgs/iis/137.png" alt="image-20231201101432036"></p>
<h3 id="入侵检测系统IDS"><a href="#入侵检测系统IDS" class="headerlink" title="入侵检测系统IDS"></a>入侵检测系统IDS</h3><h4 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h4><h5 id="安全入侵"><a href="#安全入侵" class="headerlink" title="安全入侵"></a>安全入侵</h5><p>一个安全事件或多个安全事件的组合构成一个安全事故( security incident)，在安全事故中入侵者在未经授权的情况下获取或尝试获取一个系统(或系统资源)的访问权。</p>
<h5 id="入侵检测-1"><a href="#入侵检测-1" class="headerlink" title="入侵检测"></a>入侵检测</h5><p>一种监控并分析系统事件的安全服务，目标是发现未经授权而访问系统资源的尝试活动，并提供实时或近似实时的报警</p>
<h4 id="入侵检测系统（IDS）"><a href="#入侵检测系统（IDS）" class="headerlink" title="入侵检测系统（IDS）"></a>入侵检测系统（IDS）</h4><p>进行入侵检测的软件与硬件的组合便是入侵检测系统</p>
<p>intrusion detection sys</p>
<h5 id="需要IDS原因"><a href="#需要IDS原因" class="headerlink" title="需要IDS原因"></a>需要IDS原因</h5><ul>
<li>防火墙的不足<ul>
<li>是网络边界的设备</li>
<li>自身可以被攻破</li>
<li>对某些攻击保护很弱</li>
<li>不是所有的威胁来自防火墙外部</li>
</ul>
</li>
<li>入侵容易<ul>
<li>入侵教程随处可见</li>
<li>各种工具唾手可得</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>优点</th>
<th>局限性</th>
</tr>
</thead>
<tbody><tr>
<td>防火墙</td>
<td>可简化网络管理，产品成熟</td>
<td>无法处理网络内部的攻击</td>
</tr>
<tr>
<td>IDS</td>
<td>实时监控网络安全状态</td>
<td>误报警，缓慢攻击，新的攻击模式</td>
</tr>
<tr>
<td>Scanner</td>
<td>简单可操作，帮助系统管理员和安全服务人员解决实际问题</td>
<td>并不能真正扫描漏洞</td>
</tr>
<tr>
<td>VPN</td>
<td>保护公网上的内部通信</td>
<td>可视为防火墙上的一个漏洞</td>
</tr>
<tr>
<td>防病毒</td>
<td>针对文件与邮件，产品成熟</td>
<td>功能单一</td>
</tr>
</tbody></table>
<h5 id="入侵检测系统性能关键参数"><a href="#入侵检测系统性能关键参数" class="headerlink" title="入侵检测系统性能关键参数"></a>入侵检测系统性能关键参数</h5><p><strong>误报</strong>(false positive)：系统错误地将异常活动定义为入侵。</p>
<p><strong>漏报</strong>(false negative)：系统未能检测出真正的入侵行为。</p>
<h5 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h5><ul>
<li>不间断运行</li>
<li>具有容错功能</li>
<li>抵御破坏</li>
<li>对系统增加最小的开销</li>
<li>根据系统安全策略配置</li>
<li>适应系统和用户行为变化</li>
<li>监测更多主机</li>
<li>提供很好的服务降级</li>
<li>允许动态重新配置</li>
</ul>
<h5 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h5><p>三个基本组件</p>
<ul>
<li><p>传感器</p>
<p>信息收集</p>
</li>
<li><p>分析器</p>
<p>分析收集的信息，确定是否发生了入侵</p>
</li>
<li><p>用户接口</p>
<p>查看系统输出或控制系统行为</p>
</li>
</ul>
<h5 id="传感器-信息收集"><a href="#传感器-信息收集" class="headerlink" title="传感器-信息收集"></a>传感器-信息收集</h5><p>入侵检测的第一步是信息收集，收集内容包括系统、网络、数据及用户活动的状态和行为</p>
<p>从一个源来的信息有可能看不出疑点，因此要尽可能扩大检测范围，信息收集的来源如下</p>
<ul>
<li>系统调用踪迹</li>
<li>审计(日志文件)记录</li>
<li>文件完整性校验和</li>
<li>注册表访问</li>
</ul>
<p>入侵检测很大程度上依赖于收集信息的可靠性和正确性，因此入侵检测系统软件本身应具有相当强的完整性和坚固性，防止被篡改而收集到错误的信息。</p>
<h5 id="分析器-信息分析"><a href="#分析器-信息分析" class="headerlink" title="分析器-信息分析"></a>分析器-信息分析</h5><p>分析传感器收集到的信息，确定是否发生了入侵。主要分为以下两种方法。</p>
<ul>
<li>异常检测<ul>
<li>采集有关合法用户在某段时间内的行为数据；</li>
<li>统计检验被监测的行为，以较高的置信度确定该行为是否不是合法用户的行为</li>
</ul>
</li>
<li>特征或启发性检测<ul>
<li>使用一组已知恶意数据模式(特征或者攻击规则(启发式)组成的集合来与当前的行为进行比较；</li>
<li>也被称为误用检测；</li>
<li>仅仅可以被用来识别有模式或者有规则的已知攻击。</li>
</ul>
</li>
</ul>
<h6 id="信息分析-异常检测"><a href="#信息分析-异常检测" class="headerlink" title="信息分析-异常检测"></a>信息分析-异常检测</h6><p>异常检测方法首先有一个训练过程，其通过在被监控的系统上收集和处理正常行为的相关信息来建立一个合法用户的行为模型。检测时，会把当前被观测到的行为与模型进行比较，从而确定是否为入侵行为。</p>
<ul>
<li>统计法</li>
<li>基于知识法</li>
<li>机器学习法</li>
</ul>
<p><img src="/imgs/iis/138.png" alt="image-20231201131221503"></p>
<h6 id="信息分析-特征或启发性探测"><a href="#信息分析-特征或启发性探测" class="headerlink" title="信息分析-特征或启发性探测"></a>信息分析-特征或启发性探测</h6><ul>
<li>特征方法<ul>
<li>用一个大的已知恶意数据模式的集合去匹配系统中或发送到网络中的数据。</li>
<li>特征集合需要足够大，这样可以在尽可能减小误报率的同时检测到最多的恶意数据。</li>
<li>该方法被广泛应用于反病毒产品、网络流量扫描代理以及NIDS中。</li>
</ul>
</li>
<li>基于规则的启发式识别<ul>
<li>采用规则来识别已知的渗透或者利用已知漏洞进行的渗透。</li>
<li>规则还可用来识别可疑行为，即使该行为并未超出已建立的可用模式范围。</li>
<li>通常，系统中使用的规则与特定的机器和操作系统有关。</li>
<li>Snort系统是一个基于规则的NIDS实例。</li>
</ul>
</li>
</ul>
<h4 id="入侵检测的分类-按数据来源"><a href="#入侵检测的分类-按数据来源" class="headerlink" title="入侵检测的分类-按数据来源"></a>入侵检测的分类-按数据来源</h4><ul>
<li><p>基于主机的IDS-HIDS</p>
<p>监测一台主机的特征和该主机发生的与可疑活动相关的事件</p>
</li>
<li><p>基于网络的IDS-NIDS</p>
<p>监测特定的网段或设备的流量并分析网络、传输和应用协议，用以识别可疑的活动</p>
</li>
<li><p>分布式或混合式IDS<br>通常是将主机的传感器和网络的传感器收集到的信息结合，并汇总到一个中央分析器中，这样能够更好地识别入侵活动并做出响应。</p>
</li>
</ul>
<h5 id="基于主机的入侵检测HIDS"><a href="#基于主机的入侵检测HIDS" class="headerlink" title="基于主机的入侵检测HIDS"></a>基于主机的入侵检测HIDS</h5><p>HIDS向易受攻击或敏感的系统中添加专用的安全软件层，包括数据库服务器和管理系统等。HIDS以多种方式监测系统上的活动，检测可疑行为。</p>
<h6 id="主要目的"><a href="#主要目的" class="headerlink" title="主要目的"></a>主要目的</h6><p>HIDS可以在任何损害发生之前阻止攻击，但它的主要目的还是检测入侵、记录可疑事件，并发送警报</p>
<h6 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h6><p>HIDS可以使用异常、特征、启发式方法来检测未授权的行为，实现检测外部和内部入侵，这一点是基于网络的IDS或者防火墙所不及的</p>
<h6 id="检测内容"><a href="#检测内容" class="headerlink" title="检测内容"></a>检测内容</h6><p>系统调用、端口调用、系统日志、安全审记、应用日志</p>
<h5 id="基于网络的入侵检测NIDS"><a href="#基于网络的入侵检测NIDS" class="headerlink" title="基于网络的入侵检测NIDS"></a>基于网络的入侵检测NIDS</h5><p>NIDS监控一个网络或多个互联网络上选定的位置的网络流量。NIDS检测网络层、传输层或应用层协议的活动，实时或接近于实时地分析网络数据包，以试图发现入侵模式。</p>
<h6 id="与HIDS区别"><a href="#与HIDS区别" class="headerlink" title="与HIDS区别"></a>与HIDS区别</h6><p>NIDS检测网络上流向潜在的易受攻击的计算机系统的数据包流量，而HIDS检测的是主机上的用户和软件活动</p>
<h6 id="典型的NIDS设备"><a href="#典型的NIDS设备" class="headerlink" title="典型的NIDS设备"></a>典型的NIDS设备</h6><ul>
<li>大量传感器用来监控数据包流量；</li>
<li>一个或多个服务器负责NIDS管理功能；</li>
<li>一个或多个管理控制台提供人机交互的接口</li>
</ul>
<p>分析流量模式从而检测入侵的工作可以在传感器、管理服务器或在二者上组合完成</p>
<h6 id="检测内容-1"><a href="#检测内容-1" class="headerlink" title="检测内容"></a>检测内容</h6><p>包头信息+有效数据部分</p>
<p><img src="/imgs/iis/139.png" alt="image-20231201131956728"></p>
<p><img src="/imgs/iis/140.png" alt="image-20231201132026891"></p>
<h6 id="适合使用特征检测进行识别的攻击"><a href="#适合使用特征检测进行识别的攻击" class="headerlink" title="适合使用特征检测进行识别的攻击"></a>适合使用特征检测进行识别的攻击</h6><ul>
<li>应用层侦察和攻击</li>
<li>传输层侦察和攻击</li>
<li>网络层侦察和攻击</li>
<li>意外应用程序服务</li>
<li>策略违背</li>
</ul>
<h6 id="适合使用异常检测进行识别的攻击"><a href="#适合使用异常检测进行识别的攻击" class="headerlink" title="适合使用异常检测进行识别的攻击"></a>适合使用异常检测进行识别的攻击</h6><ul>
<li>拒绝服务(DoS)攻击</li>
<li>扫描</li>
<li>蠕虫</li>
</ul>
<h6 id="异常检测技术-状态协议分析"><a href="#异常检测技术-状态协议分析" class="headerlink" title="异常检测技术-状态协议分析"></a>异常检测技术-状态协议分析</h6><p>SPA的检测是通过比较观测的网络流量与预定的、供应商提供的正常的流量特征实现的。这与基于组织特定的流量特征的异常检测技术不同。</p>
<p><strong>优点</strong></p>
<p>SPA通过推断和追踪网络、传输和应用协议的状态，保证网络活动按预期发展。主要优势在于其对所要求资源的高利用率。</p>
<p><strong>警报日志记录</strong></p>
<h5 id="分布式入侵检测系统"><a href="#分布式入侵检测系统" class="headerlink" title="分布式入侵检测系统"></a>分布式入侵检测系统</h5><p><img src="/imgs/iis/141.png" alt="image-20231201132442091"></p>
<p><img src="/imgs/iis/142.png" alt="image-20231201132503334"></p>
<h3 id="入侵检测技术-蜜罐"><a href="#入侵检测技术-蜜罐" class="headerlink" title="入侵检测技术-蜜罐"></a>入侵检测技术-蜜罐</h3><p>Honeypot也叫蜜罐，指一种安全资源。蜜罐是掩人耳日的系统，是为引诱潜在的攻击者远离关键系统面设计的，它的价值就是被探测，被攻击或攻陷</p>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ul>
<li>转移攻击者对重要系统的访问；</li>
<li>收集有关攻击者活动的信息；</li>
<li>引诱攻击者在系统中逗留足够长的时间，以便于管理员对此攻击做出响应</li>
</ul>
<p>蜜罐填满了看起来有价值但系统的合法用户不会访问的伪造信息。因此，任何对蜜罐的访问都是可疑的。蜜罐系统装备了敏感的监控器和事件记录器，用于检测这些访问和关攻击者的活动信息。</p>
<p>蜜罐是一种没有产出的资源。网络以外的任何人与蜜罐进行交互都没有合法的理由。因此，任何与蜜罐系统通信的尝试很可能是一个探测、扫描或者攻击。相反，如果一个蜜罐发起对外通信，则系统可能已被破坏。</p>
<h4 id="蜜罐分类"><a href="#蜜罐分类" class="headerlink" title="蜜罐分类"></a>蜜罐分类</h4><h5 id="低交互蜜罐"><a href="#低交互蜜罐" class="headerlink" title="低交互蜜罐"></a>低交互蜜罐</h5><ul>
<li>由能够模拟特定IT服务或系统的软件包构成，它足以提供一种真实的初级交互，但是却无法提供所模拟服务或系统的全部功能；</li>
<li>提供了一个低真实度的目标；</li>
<li>通常来说，这类蜜罐作为一个提供报警功能的分布式IDS的组件已经足够了</li>
</ul>
<h5 id="高交互蜜罐"><a href="#高交互蜜罐" class="headerlink" title="高交互蜜罐"></a>高交互蜜罐</h5><ul>
<li>是一个带有完整操作系统、服务以及应用程序的真实系统，被部署在攻击者能够访问的地方；</li>
<li>是一个更为真实的目标，很有可能消耗掉攻击者更长的时间；</li>
<li>但是它需要极大的资源；</li>
<li>一旦被攻破，就可能被用来发起对其他系统的攻击</li>
</ul>
<h4 id="蜜罐拓扑结构"><a href="#蜜罐拓扑结构" class="headerlink" title="蜜罐拓扑结构"></a>蜜罐拓扑结构</h4><p><img src="/imgs/iis/143.png" alt="image-20231201132843551"></p>
<h4 id="蜜罐部署"><a href="#蜜罐部署" class="headerlink" title="蜜罐部署"></a>蜜罐部署</h4><p><img src="/imgs/iis/144.png" alt="image-20231201132909777"></p>
<h3 id="Snort"><a href="#Snort" class="headerlink" title="Snort"></a>Snort</h3><p>Snort是开源、高度可配置且可移植的基于主机或基于网络的IDS。Snort被称为是轻量级IDS，它具有以下特征：</p>
<ul>
<li>可以在大多数网络节点(主机、服务器和路由器)轻松地部署；</li>
<li>使用少量的内存和处理器时间进行高效操作；</li>
<li>系统管理员可以容易地进行配置，以便在较短时间内实现特定的安全解决方案。</li>
</ul>
<p><img src="/imgs/iis/145.png" alt="image-20231201132956210"></p>
<h4 id="Snort规则"><a href="#Snort规则" class="headerlink" title="Snort规则"></a>Snort规则</h4><p>Snort使用一种简单、灵活的规则定义语言来生成检测引擎可用的规则。尽管规则非常简单，可以直接编写，但它们的功能足以检测各种恶意或可疑的网络流量。</p>
<p><img src="/imgs/iis/146.png" alt="image-20231201133039463"></p>
<h4 id="规则动作"><a href="#规则动作" class="headerlink" title="规则动作"></a>规则动作</h4><p><img src="/imgs/iis/147.png" alt="image-20231201133105282"></p>
<h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><h3 id="防火墙的必要性"><a href="#防火墙的必要性" class="headerlink" title="防火墙的必要性"></a>防火墙的必要性</h3><p>防火墙是一种用于保护本地系统或网络免受基于网络的安全威胁，同时支持通过广域网或Internet访问外部世界的工具。</p>
<p>保护局域网的有效手段</p>
<p>作为一种安全周界</p>
<ul>
<li>加强安全和审计的遏制点</li>
<li>将内部系统与外界网络隔开</li>
</ul>
<h3 id="防火墙的特征与访问策略"><a href="#防火墙的特征与访问策略" class="headerlink" title="防火墙的特征与访问策略"></a>防火墙的特征与访问策略</h3><h4 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h4><ul>
<li>所有所有入站和出站的网络流量都必须通过防火墙</li>
<li>只有经过授权的网络流量，例如符合本地安全策略定义的流量，防火墙才允许其通过</li>
<li>防火墙本身不能被渗透</li>
</ul>
<h4 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h4><ul>
<li>不能阻止绕开防火墙的攻击</li>
<li>不能完全防止内部威胁</li>
<li>在广域网被感染的电子设备可能被连接到内部网络使用，此时防火墙无法阻止</li>
</ul>
<h4 id="访问策略"><a href="#访问策略" class="headerlink" title="访问策略"></a>访问策略</h4><p>指定合适的访问策略是防火墙的规划和实施过程的关键部分</p>
<ul>
<li>策略中会列出可以通过防火墙的合法流量类型</li>
<li>包括地址范围、协议、应用程序、内容类型等</li>
</ul>
<p>该策略应由企业的信息安全风险评估和策略部门进行制定</p>
<p>访问策略先是根据一个较为广义的规范，即公司需要支持哪些类型的流量而进行制定</p>
<h4 id="过滤特性"><a href="#过滤特性" class="headerlink" title="过滤特性"></a>过滤特性</h4><h5 id="IP地址和协议值"><a href="#IP地址和协议值" class="headerlink" title="IP地址和协议值"></a>IP地址和协议值</h5><p>用来限制对特定服务的访问</p>
<ul>
<li>通常被包过滤和状态检测防火墙使用</li>
</ul>
<h5 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h5><p>主要用于转发和监控特定应用层协议的信息交换</p>
<ul>
<li>通常被应用层网关所使用</li>
</ul>
<h5 id="用户身份"><a href="#用户身份" class="headerlink" title="用户身份"></a>用户身份</h5><p>通常用于那些需要确认自己正在使用某种形式的安全认证技术的内部用户</p>
<h5 id="网络活动"><a href="#网络活动" class="headerlink" title="网络活动"></a>网络活动</h5><p>这是基于时间或请求等注意事项的访问控制。例如限定时间段、请求频率、检测扫描请求或其他行为模式</p>
<h3 id="防火墙的类型"><a href="#防火墙的类型" class="headerlink" title="防火墙的类型"></a>防火墙的类型</h3><p><img src="/imgs/iis/148.png" alt="image-20231208101522714"></p>
<h4 id="包过滤防火墙"><a href="#包过滤防火墙" class="headerlink" title="包过滤防火墙"></a>包过滤防火墙</h4><p>包中包含信息：源IP，目的IP，源和目的端传输层地址，IP协议域，接口</p>
<p>包过滤防火墙根据一组规则来检查每个接收和发送的IP包</p>
<ul>
<li>通常，包过滤器设置成基于与IP和TCP头（header）域匹配的规则列表</li>
<li>根据匹配的规则来判断该包是转发还是丢弃</li>
</ul>
<p>两种默认策略</p>
<ul>
<li>丢弃：没有明确准许的将被阻止<ul>
<li>更加保守，更受控制，对用户可见</li>
</ul>
</li>
<li>转发：没有明确阻止的将被准许<ul>
<li>更易管理和使用，但安全性也降低了</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>规则</th>
<th>方向</th>
<th>源地址</th>
<th>目的地址</th>
<th>协议</th>
<th>目的端口</th>
<th>动作</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>进入</td>
<td>外部</td>
<td>内部</td>
<td>TCP</td>
<td>25</td>
<td>允许</td>
</tr>
<tr>
<td>2</td>
<td>离开</td>
<td>内部</td>
<td>外部</td>
<td>TCP</td>
<td>&gt;1023</td>
<td>允许</td>
</tr>
<tr>
<td>3</td>
<td>离开</td>
<td>内部</td>
<td>外部</td>
<td>TCP</td>
<td>25</td>
<td>允许</td>
</tr>
<tr>
<td>4</td>
<td>进入</td>
<td>外部</td>
<td>内部</td>
<td>TCP</td>
<td>&gt;1023</td>
<td>允许</td>
</tr>
<tr>
<td>5</td>
<td>任意</td>
<td>任意</td>
<td>任意</td>
<td>任意</td>
<td>任意</td>
<td>禁止</td>
</tr>
</tbody></table>
<ol>
<li>允许从外部源入站的电子邮件流量（SMTP的端口是25）。</li>
<li>该规则试图允许对入站的SMTP连接进行响应。</li>
<li>允许向外部源出站的电子邮件流量。</li>
<li>该规则试图允许对出站的SMTP连接进行响应。</li>
<li>这是默认规则的明确说明。所有规则集的最后都必然会存在这样一条规则。</li>
</ol>
<p><strong>优点</strong></p>
<ul>
<li>简单：仅需根据包的信息确定访问策略</li>
<li>对用户透明，处理速度快</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>不能阻止利用了特定应用的漏洞或功能所进行的攻击</li>
<li>有限的日志记录功能</li>
<li>不支持高级的用户认证机制</li>
<li>对利用TCP&#x2F;IP规范和协议栈存在的问题进行的攻击没有很好的应对措施</li>
<li>不恰当的设置会引起包过滤防火墙的安全性受到威胁</li>
</ul>
<h4 id="状态检测防火墙"><a href="#状态检测防火墙" class="headerlink" title="状态检测防火墙"></a>状态检测防火墙</h4><p>状态检测防火墙通过建立一个出站TCP连接目录来强制执行TCP流量的规则</p>
<ul>
<li>每个当前建立的连接都有一个条目</li>
<li>只有数据包符合这个目录中的某项时，包过滤器才允许那些到达高端口号的入站流量通过</li>
</ul>
<table>
<thead>
<tr>
<th>源地址</th>
<th>源端口</th>
<th>目的地址</th>
<th>目的端口</th>
<th>连接状态</th>
</tr>
</thead>
<tbody><tr>
<td>192.168.1.100</td>
<td>1030</td>
<td>210.9.88.29</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>192.168.1.102</td>
<td>1031</td>
<td>216.32.42.123</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>192.168.1.101</td>
<td>1033</td>
<td>173.66.32.122</td>
<td>25</td>
<td>已建立</td>
</tr>
<tr>
<td>192.168.1.106</td>
<td>1035</td>
<td>177.231.32.12</td>
<td>79</td>
<td>已建立</td>
</tr>
<tr>
<td>223.43.21.231</td>
<td>1990</td>
<td>192.168.1.6</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>219.22.123.32</td>
<td>2112</td>
<td>192.168.1.6</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>210.99.212.18</td>
<td>3321</td>
<td>192.168.1.6</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>24.102.32.23</td>
<td>1025</td>
<td>192.168.1.6</td>
<td>80</td>
<td>已建立</td>
</tr>
<tr>
<td>223.21.22.12</td>
<td>1046</td>
<td>192.168.1.6</td>
<td>80</td>
<td>已建立</td>
</tr>
</tbody></table>
<h4 id="应用级网关"><a href="#应用级网关" class="headerlink" title="应用级网关"></a>应用级网关</h4><p>起到应用流量中继器的作用</p>
<ul>
<li>用户使用TCP&#x2F;IP应用程序连接到网关，同时网关要求用户提供需访问的主机名称</li>
<li>用户提供一个有效ID和认证信息，网关联系远程主机并在两个端点之间中继TCP分段</li>
<li>如果网管没有为特定应用程序实现代理代码，则该服务不受支持，无法通过网关</li>
</ul>
<h4 id="电路级网关"><a href="#电路级网关" class="headerlink" title="电路级网关"></a>电路级网关</h4><p>建立两条TCP连接：</p>
<ul>
<li>自身和内部主机TCP用户间的连接</li>
<li>自身和外部主机TCP用户间的连接</li>
</ul>
<p>网关在这两条连接中中继TCP分段，不检查其内容其安全功能为判断哪些连接是允许的</p>
<p>一种典型的应用是系统管理员信任系统内部用户的情况，此时网关可被设置为两种连接</p>
<ul>
<li>应用级服务或代理服务入站连接</li>
<li>电路及功能的出站连接</li>
</ul>
<h3 id="防火墙的布置"><a href="#防火墙的布置" class="headerlink" title="防火墙的布置"></a>防火墙的布置</h3><h4 id="堡垒主机"><a href="#堡垒主机" class="headerlink" title="堡垒主机"></a>堡垒主机</h4><p>堡垒主机被防火墙管理员称为网络安全中极强的端系统。通常，堡垒主机可以作为应用级或电路级网关平台。</p>
<p><strong>特征</strong></p>
<ul>
<li>运行操作系统的安全版本。</li>
<li>在用户被允许访问代理服务之前，堡垒主机可能需要对其进行附加认证。</li>
<li>文件系统中那些包含可执行代码的部分被设置成只读。</li>
<li>每个代理被配置为只允许对指定系统进行访问。</li>
<li>每个代理通过记录所有网络流量. 每条连接以及每条连接的持续时间来维护详细的审计信息。</li>
<li>每个代理模块是专门为网络安全设计的非常小的软件包。易于检查其缺陷。</li>
<li>每一个代理都独立于其他的代理。</li>
<li>每个代理被配置为只支持标准应用命令集的子集。</li>
</ul>
<h4 id="基于主机的防火墙"><a href="#基于主机的防火墙" class="headerlink" title="基于主机的防火墙"></a>基于主机的防火墙</h4><ul>
<li>用于保障个人主机安全</li>
<li>许多操作系统中是自带的，或者以附件的形式提供</li>
<li>过滤和限制数据包流</li>
<li>通常位于服务器上</li>
</ul>
<p><strong>优点</strong></p>
<ul>
<li>过滤规则可以根据主机环境定制，既能够执行服务器共有的安全策略，也能够针对不同的应用使用不同的过滤规则。</li>
<li>保护功能独立于网络的拓扑结构。因此，不管是内部的攻击还是外部的攻击都必须通过防火墙。</li>
<li>应用于单机防火墙之间的联合处，基于主机的防火墙提供了一个额外的保护层。当在网络中添加新服务器时，只需配置服务器自带的防火墙，而不需修改整个网络的防火墙设置。</li>
</ul>
<h4 id="个人防火墙"><a href="#个人防火墙" class="headerlink" title="个人防火墙"></a>个人防火墙</h4><ul>
<li>控制个人电脑或者工作站与Internet或企业网络之间的网络流量</li>
<li>可以用于家庭环境或公司的内网中</li>
<li>通常，个人防火墙是个人电脑上的一个软件模块.</li>
</ul>
<h3 id="防火墙的部署与配置"><a href="#防火墙的部署与配置" class="headerlink" title="防火墙的部署与配置"></a>防火墙的部署与配置</h3><h4 id="DMZ网络"><a href="#DMZ网络" class="headerlink" title="DMZ网络"></a>DMZ网络</h4><p><img src="/imgs/iis/149.png" alt="image-20231208103755293"></p>
<h4 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h4><p>一组依靠相对不安全的网络互相连接的计算机，通过加密技术和特殊的协议提供安全性</p>
<p>IPSec安全协议</p>
<p><img src="/imgs/iis/150.png" alt="image-20231208103837823"></p>
<h3 id="拓扑结构"><a href="#拓扑结构" class="headerlink" title="拓扑结构"></a>拓扑结构</h3><h4 id="屏蔽路由器"><a href="#屏蔽路由器" class="headerlink" title="屏蔽路由器"></a>屏蔽路由器</h4><p>外部网络与内部网络之间具有无状态或者全部包过滤功能的单个路由器</p>
<h4 id="独立内嵌堡垒主机"><a href="#独立内嵌堡垒主机" class="headerlink" title="独立内嵌堡垒主机"></a>独立内嵌堡垒主机</h4><p>一种在外部和内部路由器之间的单独防火墙设备</p>
<h4 id="主机驻留防火墙"><a href="#主机驻留防火墙" class="headerlink" title="主机驻留防火墙"></a>主机驻留防火墙</h4><p>包括个人防火墙软件和服务器上的防火墙软件</p>
<h4 id="分布式防火墙配置"><a href="#分布式防火墙配置" class="headerlink" title="分布式防火墙配置"></a>分布式防火墙配置</h4><p>被大型商业机构和政府部门使用</p>
<h4 id="双T型堡垒主机"><a href="#双T型堡垒主机" class="headerlink" title="双T型堡垒主机"></a>双T型堡垒主机</h4><p>非军事区连接在堡垒防火墙的一个独立的网络接口上</p>
<h4 id="独立T型堡垒主机"><a href="#独立T型堡垒主机" class="headerlink" title="独立T型堡垒主机"></a>独立T型堡垒主机</h4><p>在堡垒主机上有一个单独的接口通往一个非军事区DMZ，外部可见的服务器设置在此非军事区内</p>
<h4 id="双内嵌堡垒主机"><a href="#双内嵌堡垒主机" class="headerlink" title="双内嵌堡垒主机"></a>双内嵌堡垒主机</h4><p>非军事区被夹在两个堡垒防火墙中间</p>
<h2 id="缓冲区溢出"><a href="#缓冲区溢出" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h2><h3 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h3><h4 id="高级语言"><a href="#高级语言" class="headerlink" title="高级语言"></a>高级语言</h4><p>存在一个庞大的可继承的代码体使用这些不安全的函数，因此容易导致缓冲区溢出</p>
<h4 id="缓冲区溢出-1"><a href="#缓冲区溢出-1" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h4><p>缓冲区溢出是指接口的一种状况，此时大量的输入被放置到缓冲区或者数据存储区，超过了其所分配的存储能力，覆盖了其他信息。</p>
<p>缓冲区可能被设置在进程的栈区、堆区，或者数据区。当一个进程试图存储超出缓冲区存储容量（固定长度）的数据，从而导致相邻的内存区域被覆盖时，就会发生缓冲区溢出。</p>
<p>这些内存区域可能保存着其他程序的变量或者参数，也可能保存着程序控制流数据，例如返回地址和指向前一个栈帧的指针。</p>
<p><img src="/imgs/iis/151.png" alt="image-20231208111126533"></p>
<h4 id="后果"><a href="#后果" class="headerlink" title="后果"></a>后果</h4><ul>
<li>程序使用的数据受到破坏；</li>
<li>在程序中发生意外的控制权转移；</li>
<li>可能的内存非法访问；</li>
<li>很可能最终导致程序终止。</li>
</ul>
<p>当缓冲区溢出被用于蓄意攻击系统时，系统的控制权可能会被转移到攻击者选择的代码，因此导致被攻击进程的特权被用于执行攻击者任意想要执行的代码。</p>
<p><img src="/imgs/iis/152.png" alt="image-20231208111239801"></p>
<p><img src="/imgs/iis/153.png" alt="image-20231208111256893"></p>
<h3 id="缓冲区溢出攻击"><a href="#缓冲区溢出攻击" class="headerlink" title="缓冲区溢出攻击"></a>缓冲区溢出攻击</h3><p><img src="/imgs/iis/154.png" alt="image-20231208111330021"></p>
<p>缓冲区溢出是一种常见的攻击机制，攻击者利用程序漏洞，将自己的攻击代码植入有缓冲区溢出漏洞的程序执行体中，改变该程序的执行过程，来获取目标系统的控制权</p>
<h4 id="攻击准备"><a href="#攻击准备" class="headerlink" title="攻击准备"></a>攻击准备</h4><p>要想利用任何一种类型的缓冲区溢出，例如已经举例说明的那些程序，攻击者需要：</p>
<ul>
<li>理解缓冲区是如何存储在进程的内存中的，以及因此破坏相邻的内存区域和改变程序的执行流的可能性。</li>
<li>识别程序中的缓冲区溢出漏洞，这些漏洞在攻击者的控制下使外部的数据资源能够被触发。</li>
</ul>
<p>识别有漏洞的程序可以通过检查源代码、在程序处理过长的输入时跟踪程序的执行、或者使用一些工具，例如fuzzing技术。</p>
<h4 id="栈缓冲区溢出"><a href="#栈缓冲区溢出" class="headerlink" title="栈缓冲区溢出"></a>栈缓冲区溢出</h4><p>当目标缓冲区被设置在栈区时，所发生的缓冲区溢出就是栈缓冲区溢出（stack buffer overflow），又被称为栈溢出攻击（stack smashing）</p>
<ol>
<li>当一个函数调用另一个函数时，它需要在某个地方保存返回地址，这样当调用完成以后，被调用的函数能够将控制权返还给调用函数。</li>
<li>除此之外，还需要一些存储单元保存传递给被调用函数的参数，以及当被调用的函数返回时，也可能保存它希望继续使用的寄存器变量的值。</li>
</ol>
<p>所有这些数据一般都保存在栈的一个被称为栈帧（stack frame）的结构中。</p>
<p><img src="/imgs/iis/155.png" alt="image-20231208112532882"></p>
<p>函数p调用函数Q的一般过程可以总结如下：<br>调用函数P：</p>
<ol>
<li>为被调用的函数压入参数进栈；</li>
<li>执行call指令调用目标函数，压入返回地址进栈。</li>
</ol>
<p>被调用的函数Q：</p>
<ol>
<li>压入当前的帧指针，指向其调用函数的栈帧。</li>
<li>向下移动栈指针，为被调用函数的局部变量分配空间。</li>
<li>……</li>
</ol>
<p><img src="/imgs/iis/156.png" alt="image-20231208112552864"></p>
<p>程序装载到进程内存</p>
<p><img src="/imgs/iis/157.png" alt="image-20231208113126719"></p>
<p><img src="/imgs/iis/158.png" alt="image-20231208113147403"></p>
<p><img src="/imgs/iis/159.png" alt="image-20231208113201752"></p>
<h4 id="shellcode"><a href="#shellcode" class="headerlink" title="shellcode"></a>shellcode</h4><p>shellcode是一段用于利用缓冲区溢出漏洞而执行的代码，通常为16进制的机器码，保存在发生溢出的缓冲区中。</p>
<h5 id="shellcode的功能"><a href="#shellcode的功能" class="headerlink" title="shellcode的功能"></a>shellcode的功能</h5><p>将控制权转移给一个用户的命令行解释器或者shell，使攻击者可以利用被攻击程序的特权访问系统上任何可用的程序</p>
<h5 id="shellcode分类"><a href="#shellcode分类" class="headerlink" title="shellcode分类"></a>shellcode分类</h5><p>本地shellcode：<br>用于利用软件漏洞提升权限。比如在Linux下由普通权限提升至root权限。</p>
<p>远程shellcode：<br>利用软件漏洞获得特定的shellcode，再经由C或Python编写远程攻击程序，进而取得对方电脑的root权限。</p>
<p>shellcode仅仅是指机器代码，是与机器指令和数据值相对应的一串二进制值，而这些指令和数据值能够使攻击者实现期望的功能。这意味着：</p>
<ul>
<li>编写shellcode需要熟悉汇编语言和目标系统的操作；</li>
<li>shellcode依赖于特定的处理器结构和操作系统；</li>
<li>缓冲区溢出攻击总是针对特定操作系统上运行的特定软件。</li>
</ul>
<h5 id="若干情况"><a href="#若干情况" class="headerlink" title="若干情况"></a>若干情况</h5><p>目标程序可能是：</p>
<ul>
<li>受信任的系统工具</li>
<li>网络守护进程</li>
<li>常用的库代码</li>
</ul>
<p>shellcode 的功能</p>
<ul>
<li>被连接的时候建立一个侦听服务启动一个远程shell</li>
<li>建立一个相反的shell,反向连接到黑客系统</li>
<li>使用本地攻击，创建一个shell</li>
<li>废除当前阻止其他攻击的防火墙规则</li>
<li>摆脱chrooted(限制执行）的环境，对系统进行完全访问</li>
</ul>
<h3 id="缓冲区溢出防御"><a href="#缓冲区溢出防御" class="headerlink" title="缓冲区溢出防御"></a>缓冲区溢出防御</h3><p>两种防御方式</p>
<ul>
<li><p>编译时防御</p>
<p>加固程序来抵抗在新程序中的攻击</p>
</li>
<li><p>运行时防御</p>
<p>在现有的程序中检测和终止攻击</p>
</li>
</ul>
<h4 id="编译时防御"><a href="#编译时防御" class="headerlink" title="编译时防御"></a>编译时防御</h4><h5 id="程序设计语言的选择"><a href="#程序设计语言的选择" class="headerlink" title="程序设计语言的选择"></a>程序设计语言的选择</h5><p>使用一种现代高级程序语言编写程序</p>
<p>优点</p>
<ul>
<li>不容易受到缓冲区溢出的攻击。</li>
<li>它们的编译器包含附加的代码自动加强范围检査。</li>
</ul>
<p>缺点</p>
<ul>
<li>在编译和运行时必须执行附加代码，以此加强检査；</li>
<li>这些语言提供的灵活性和安全机制，在资源使用上会付出一定的代价；</li>
<li>距离底层的机器语言和结构越远，就意味着访问一些指令和硬件资源越不可能；</li>
<li>限制了编写代码时的有效性，例如，编写设备驱动程序，必须与底层资源进行交互。</li>
</ul>
<h5 id="安全的编码技术"><a href="#安全的编码技术" class="headerlink" title="安全的编码技术"></a>安全的编码技术</h5><p>为了加固这些系统，程序员必须检査代码，以一种安全的方式重新编写任何不安全的代码。</p>
<p>程序员对已有的代码基底（code base)进行了广泛的审计</p>
<p>OpenBSD项目是一个很好的典范，它产生了一个自由的多平台的基于4.4BSD的类UNIX (UNIX-like)操作系统。</p>
<h5 id="语言扩充"><a href="#语言扩充" class="headerlink" title="语言扩充"></a>语言扩充</h5><p>不安全的数组和指针引用，在这些引用中自动插入范围检査</p>
<p>处理这个问题需要对指针的语义进行扩充，使其包含边界信息及库例程的使用，并确保这些值被正确设置</p>
<h5 id="安全库的使用"><a href="#安全库的使用" class="headerlink" title="安全库的使用"></a>安全库的使用</h5><p>改进系统安全性的一个方法，是用较安全的变体来代替这些不安全的例程。例如</p>
<ol>
<li>包括OpenBSD在内的BSD系列的操作系统中的strlcpy()函数是strcpy函数更加的安全版本。在已知目标缓冲区大小的前提下，将传入的地址参数开始的字符串复制到以目标地址空间，不会造成缓冲区溢出。</li>
<li>Libsafe是一个动态库，它在现有的标准库之前被装载。它实现了标准的语义但又包含了附加的检査，保证了复制操作没有超出栈帧里的局部变量的有效地址空间。</li>
</ol>
<h5 id="栈保护机制"><a href="#栈保护机制" class="headerlink" title="栈保护机制"></a>栈保护机制</h5><p>栈保护机制是一个保护程序免受传统的栈溢出攻击的有效方法</p>
<p>设定函数入口和出口代码并检査其栈帧寻找有没有受到破坏的征兆，如果发现有任何修改，程序就终止运行</p>
<h6 id="栈卫士"><a href="#栈卫士" class="headerlink" title="栈卫士"></a>栈卫士</h6><p>栈卫士（stackguard)是已知的最好的保护机制之一，它是GCC编译器的<br>扩充——加入了附加的函数入口和出口代码</p>
<p>在为局部变量分配地址空间之前，在旧的帧指针地址下写入一个canary值，任何为了改变旧的帧指针和返回地址的尝试都将改变这个值。</p>
<p><img src="/imgs/iis/160.png" alt="image-20231215101813700"></p>
<p>在常用函数的退出操作（恢复旧的帧指针和转移控制权后退到返回地址）之前，添加的函数出口代码检査canary的值有没有发生变化。</p>
<p>为了对函数成功地进行防御，<strong>canary的值应该是不可预测的</strong>，而且不同系统上canary的值也应该是不同的。</p>
<h6 id="Stackshield和返回地址防护者Return-Address-Defender"><a href="#Stackshield和返回地址防护者Return-Address-Defender" class="headerlink" title="Stackshield和返回地址防护者Return Address Defender"></a>Stackshield和返回地址防护者Return Address Defender</h6><p>Stackshield和返回地址防护者使用了另外一种栈帧保护机制。这些也是GCC的扩展版，包含附加的函数入口和出口代码。</p>
<p>该方法没有改变栈帧的结构，而是在函数入口处添加代码，将返回地址的一个副本写到内存的一个安全区域(要想破坏这个区域非常困难）。</p>
<p><img src="/imgs/iis/161.png" alt="image-20231215102233025"></p>
<p>在函数的出口处，添加的代码检査栈帧里的返回地址与保存的副本，如果发现任何变化就终止程序。</p>
<p>因为栈帧的格式没有改变，故这些扩展与未改变的调试器兼容。此外，程序必须被重新编译才可以利用这些扩展。</p>
<h4 id="运行时防御"><a href="#运行时防御" class="headerlink" title="运行时防御"></a>运行时防御</h4><h5 id="地址空间随机化"><a href="#地址空间随机化" class="headerlink" title="地址空间随机化"></a>地址空间随机化</h5><p>一种显著增加预测难度的技术是，以随机的方式改变为每一个进程的栈设置的地址。</p>
<h6 id="堆内存随机分配"><a href="#堆内存随机分配" class="headerlink" title="堆内存随机分配"></a>堆内存随机分配</h6><p>除了栈之外，还有一类堆缓冲区溢出攻击，它们利用这样一个事实：连续内存分配或者堆管理数据结构的排列非常接近。堆内存分配的随机选择使预测目标缓冲区地址变得相当困难，从而可以成功阻止堆溢出攻击。</p>
<h6 id="标准库例程的存储位置随机化"><a href="#标准库例程的存储位置随机化" class="headerlink" title="标准库例程的存储位置随机化"></a>标准库例程的存储位置随机化</h6><p>攻击的另一个目标是标准库例程的存储位置，我们可以随机选择一个程序装载标准库的次序，随机选择它的虚拟内存地址的存储位置，这样就可以使任何特定函数的地址变得不可预测，从而减少了攻击者正确预测地址的机会。</p>
<h5 id="返回系统调用"><a href="#返回系统调用" class="headerlink" title="返回系统调用"></a>返回系统调用</h5><p>前面介绍的不可执行的栈是防御缓冲区溢出的，而攻击者已经转向另一种不同的攻击——改变返回地址，使程序跳转到系统上现有的代码。</p>
<ol>
<li>攻击者详细地设定一次溢出：填充缓冲区，用一个合适的地址代替保存的帧指针，用希望的库函数的地址代替返回地址，接下来写入传给库函数的参数的值。</li>
<li>当被攻击的函数返回时，它恢复（改变的）帧指针，然后出栈，并将控制权转交到返回地址，而这个地址正是攻击者期望运行的库函数代码的地址。</li>
</ol>
<p>这种攻击依赖于参数的类型以及库函数对它们的解释，攻击者需要准确知道它们的地址（一般在被改写的缓冲区范围内）</p>
<p>另一种不同的攻击是将两个库函数调用链接在一起，在一个库函数之后调用另一个库函数。链接是通过让占位符的值（被当作第一个被调用的库函数的返回地址）成为第二个函数的地址实现的。</p>
<p>防御方法：</p>
<ul>
<li>利用函数的出口代码检测栈帧或者返回地址的修改情况；</li>
<li>使用不可执行的栈（non-executable stack)；</li>
<li>内存中栈的随机选择和系统库的随机选择。</li>
</ul>
<h2 id="安全协议"><a href="#安全协议" class="headerlink" title="安全协议"></a>安全协议</h2><h3 id="典型的网络入侵手段"><a href="#典型的网络入侵手段" class="headerlink" title="典型的网络入侵手段"></a>典型的网络入侵手段</h3><ul>
<li>后门和木马</li>
<li>扫描漏洞</li>
<li>传输过程中的窃听</li>
<li>IP地址欺骗</li>
<li>会话劫持</li>
<li>拒绝服务攻击</li>
</ul>
<h3 id="邮件安全协议"><a href="#邮件安全协议" class="headerlink" title="邮件安全协议"></a>邮件安全协议</h3><h4 id="MIME"><a href="#MIME" class="headerlink" title="MIME"></a>MIME</h4><p>多用途Internet邮件扩展（MIME）是对旧的RFC822规范的扩展</p>
<ul>
<li>RFC 822采用简单的ASCII文本格式定义了一个简单报头，包括到哪里、来自哪里、主题</li>
<li>MIME提供一些新的报头域，这些域定义了消息正文(或称主体) 有关的信息</li>
</ul>
<p><img src="/imgs/iis/162.png" alt="image-20231215103432410"></p>
<h4 id="S-x2F-MIME"><a href="#S-x2F-MIME" class="headerlink" title="S&#x2F;MIME"></a>S&#x2F;MIME</h4><p>安全&#x2F;多用途Internet邮件扩展（S&#x2F;MIME）是对MIME的安全性的增强</p>
<ul>
<li>基于RSA数据安全性</li>
<li>提供了数字签名和加密E-mail消息的能力</li>
</ul>
<h5 id="S-x2F-MIME的四种新功能"><a href="#S-x2F-MIME的四种新功能" class="headerlink" title="S&#x2F;MIME的四种新功能"></a>S&#x2F;MIME的四种新功能</h5><ul>
<li>封装数据</li>
<li>签名封装数据</li>
<li>签名数据</li>
<li>透明签名数据</li>
</ul>
<h5 id="S-x2F-MIME功能流"><a href="#S-x2F-MIME功能流" class="headerlink" title="S&#x2F;MIME功能流"></a>S&#x2F;MIME功能流</h5><p><img src="/imgs/iis/163.png" alt="image-20231215103616426"></p>
<p><img src="/imgs/iis/164.png" alt="image-20231215103659174"></p>
<p><img src="/imgs/iis/165.png" alt="image-20231215103721812"></p>
<h4 id="域名密钥识别邮件标准DKIM"><a href="#域名密钥识别邮件标准DKIM" class="headerlink" title="域名密钥识别邮件标准DKIM"></a>域名密钥识别邮件标准DKIM</h4><p>一种电子邮件消息加密签名的规范，它允许一个签名的域名来声明其对邮件流中的某个消息负责</p>
<ul>
<li>用户生成一个消息，传输给邮件提交代理</li>
<li>消息被发送者私钥进行签名，签名者与其所在域相关</li>
<li>消息通过Internet中一系列邮件传输代理传递</li>
<li>在目的地，邮件投递代理从发送者域的DNS服务器中取得对应签名公钥，验证签名，而后发送给接收者</li>
</ul>
<p><img src="/imgs/iis/166.png" alt="image-20231215103836905"></p>
<p>应用最广泛的一个安全服务就是安全套接层（SSL）和随后出现的传输层安全（TLS）</p>
<h3 id="安全套接层SSL"><a href="#安全套接层SSL" class="headerlink" title="安全套接层SSL"></a>安全套接层SSL</h3><p>制定SSL协议的宗旨是利用TCP协议提供安全可靠的端到端通信协议服务，协议包括两个层次：</p>
<ul>
<li>握手协议，报警协议等上层协议。</li>
<li>较低的SSL记录层协议，其位于传输协议TCP&#x2F;IP之上。</li>
</ul>
<p><img src="/imgs/iis/167.png" alt="image-20231215104031045"></p>
<h4 id="上层协议"><a href="#上层协议" class="headerlink" title="上层协议"></a>上层协议</h4><ul>
<li>SSL握手协议</li>
<li>SSL改变密码规格协议</li>
<li>SSL报警协议</li>
</ul>
<h4 id="下层协议"><a href="#下层协议" class="headerlink" title="下层协议"></a>下层协议</h4><p>SSL记录协议</p>
<h3 id="传输层安全TLS"><a href="#传输层安全TLS" class="headerlink" title="传输层安全TLS"></a>传输层安全TLS</h3><p>TLS已经在很大程度上取代了早期的SSL实现，其协议组与SSL相似</p>
<ul>
<li>TLS以一组协议的方式实现一个通用服务，其中的协议依赖于TCP协议</li>
<li>TLS有两种实现方式：</li>
<li>作为基础协议组的一部分，对应用来说透明</li>
<li>嵌入特定的软件包中</li>
</ul>
<h4 id="记录协议"><a href="#记录协议" class="headerlink" title="记录协议"></a>记录协议</h4><p>记录协议为多种高层协议提供基本的安全服务：</p>
<ul>
<li>机密性：使用共享密钥进行对消息进行对称加密</li>
<li>消息完整性：为数据添加消息认证码（MAC）</li>
</ul>
<p><img src="/imgs/iis/168.png" alt="image-20231215104422965"></p>
<h4 id="变更密码协议"><a href="#变更密码协议" class="headerlink" title="变更密码协议"></a>变更密码协议</h4><p>变更密码协议用于将预备状态拷贝到当前状态，更新连接密码套件。</p>
<ul>
<li>仅包含一条消息，由一个值为1的字节组成。</li>
</ul>
<h4 id="报警协议"><a href="#报警协议" class="headerlink" title="报警协议"></a>报警协议</h4><p>报警协议用于向对等实体传送SSL相关的报警信息。</p>
<ul>
<li>第一个字节可以取值为警告或者致命，用以表达该消息的严重程度。如果严重程度是致命的，SSL将立刻中止该连接，该会话的其他连接可以继续，但是本次会话不会允许建立新的连接。</li>
<li>第二个字节包含一种编码用于指明具体的警告。</li>
</ul>
<h4 id="握手协议"><a href="#握手协议" class="headerlink" title="握手协议"></a>握手协议</h4><p>握手协议由右图一系列客户端和服务器之间交换的消息组成</p>
<p>应在任何应用数据被传输前使用</p>
<ul>
<li>允许服务器和客户端相互认证</li>
<li>允许服务器和客户端协商加密和MAC算法</li>
<li>用于保护TLS记录中所发送数据的加密密钥</li>
</ul>
<p><img src="/imgs/iis/169.png" alt="image-20231215111226019"></p>
<h4 id="心跳协议"><a href="#心跳协议" class="headerlink" title="心跳协议"></a>心跳协议</h4><p>由硬件或软件产生的一个周期性的信号，用以表明操作正常，其运行于TLS记录协议顶部，包含两种消息类型：</p>
<ul>
<li>心跳请求：可随时发送，包含长度、载荷、填充字段</li>
<li>心跳响应：接受到心跳请求消息时应及时响应，包含收到的心跳请求的载荷拷贝、填充字段</li>
</ul>
<p>心跳协议的目的：</p>
<ul>
<li>确保接收端还活着</li>
<li>生成了空闲时间段中的活动连接</li>
</ul>
<h4 id="SSL-x2F-TLS攻击"><a href="#SSL-x2F-TLS攻击" class="headerlink" title="SSL&#x2F;TLS攻击"></a>SSL&#x2F;TLS攻击</h4><ol>
<li>握手协议的攻击</li>
<li>记录和应用数据协议攻击</li>
<li>PKI攻击</li>
<li>其他攻击</li>
</ol>
<h4 id="心脏出血攻击"><a href="#心脏出血攻击" class="headerlink" title="心脏出血攻击"></a>心脏出血攻击</h4><p><img src="/imgs/iis/170.png" alt="image-20231215112131958"></p>
<h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><p>HTTPS是HTTP和SSL的组合，用以实现Web浏览器和Web服务器之间的安全通信</p>
<p>使用HTTPS时，下列元素将被加密：</p>
<ul>
<li>被请求的文档URL</li>
<li>文档的内容</li>
<li>浏览器表单的内容</li>
<li>由浏览器发送到服务器和由服务器发送到浏览器的cookie</li>
<li>HTTP头内容</li>
</ul>
<p><img src="/imgs/iis/171.png" alt="image-20231215112619288"></p>
<h5 id="连接开始"><a href="#连接开始" class="headerlink" title="连接开始"></a>连接开始</h5><p>客户端向服务器的一个端口开启一个连接，发送第一个TLSClientHello请求，开始TLS握手过程</p>
<p>TLS握手结束后，发送第一个HTTP请求，所有的HTTP数据作为TLS数据被发送</p>
<p><img src="/imgs/iis/172.png" alt="image-20231215112728531"></p>
<h5 id="连接关闭"><a href="#连接关闭" class="headerlink" title="连接关闭"></a>连接关闭</h5><p>HTTP客户端或服务器在HTTP记录中添加Connect：Close来表明连接在该记录发出后关闭</p>
<p>在TLS级，在每一端使用TLS警告发送close_notify警告消息，关闭连接</p>
<p><img src="/imgs/iis/173.png" alt="image-20231215112807044"></p>
<h3 id="IPv4和IPv6安全"><a href="#IPv4和IPv6安全" class="headerlink" title="IPv4和IPv6安全"></a>IPv4和IPv6安全</h3><h4 id="IP安全"><a href="#IP安全" class="headerlink" title="IP安全"></a>IP安全</h4><p>很多应用领域开发了专用安全机制，未考虑安全协议层的应用的安全问题</p>
<p>安全性涉及跨协议层</p>
<p>通过在IP级实现安全，为所有应用程序实施安全性</p>
<p>下一代IPv6中包含的身份验证和加密安全功能，当前的IPv4中同样能实现</p>
<ul>
<li>认证（AH）<ul>
<li>确保一个接收到的包，的确是报头上标识的源地址的参与实体发出的并且还确保了包在传输过程中没有被篡改</li>
</ul>
</li>
<li>机密性（ESP）<ul>
<li>使正在通信的结点对消息加密，保证消息在结点之间的传输不被第三方窃听</li>
</ul>
</li>
<li>密钥管理（IKE）<ul>
<li>与密钥的安全交换相关</li>
<li>密钥管理是由Intermet密钥交换标准IKEv2协议提供的</li>
</ul>
</li>
</ul>
<h4 id="IPSec"><a href="#IPSec" class="headerlink" title="IPSec"></a>IPSec</h4><p>IP安全（IPSecurity，简称IPSec）提供了能在LAN、公用和专用的WAN以及Internet上相互安全通信的能力</p>
<p><img src="/imgs/iis/174.png" alt="image-20231215113007064"></p>
<h5 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h5><p>在IP报文传输过程中加密和封装传输和应用层数据，并提供IP层的完整性保护。</p>
<p><img src="/imgs/iis/175.png" alt="image-20231215113121018"></p>
<h5 id="AH协议"><a href="#AH协议" class="headerlink" title="AH协议"></a>AH协议</h5><ul>
<li>支持数据完整性服务</li>
<li>确保IP报文中数据不被篡改</li>
<li>支持认证服务</li>
<li>对端系统Host身份进行认证，防止IP欺骗攻击</li>
<li>内部使用MAC(Message Authentication Code)算法，要求使用AH的通信双方要共享一个密钥</li>
</ul>
<p><img src="/imgs/iis/176.png" alt="image-20231215113330970"></p>
<h5 id="ESP协议"><a href="#ESP协议" class="headerlink" title="ESP协议"></a>ESP协议</h5><ul>
<li>支持数据机密性服务</li>
<li>支持完整性服务(可选)</li>
<li>基于对称密钥算法技术</li>
<li>可独立使用，也可与AH结合使用</li>
</ul>
<p><strong>两种模式</strong></p>
<ul>
<li>传输模式：针对上层协议提供保护，将保护扩展到IP包载荷<ul>
<li>用于主机之间端到端的通信</li>
</ul>
</li>
<li>隧道模式：对整个IP包提供保护<ul>
<li>当安全关联中一个或两个都是安全网关时可以使用</li>
<li>防火墙之后的网络中的大多数主机，皆可以进行安全通信，而无须实现IPsec</li>
</ul>
</li>
</ul>
<p><img src="/imgs/iis/177.png" alt="image-20231215113516496"></p>
<h5 id="IKE协议"><a href="#IKE协议" class="headerlink" title="IKE协议"></a>IKE协议</h5><ul>
<li>功能<ul>
<li>密钥协商</li>
<li>密钥分发</li>
</ul>
</li>
<li>需管理的密钥数<ul>
<li>如果同时使用AH和ESP，需要四个密钥</li>
</ul>
</li>
<li>使用Diffie-Hellman密钥交换方案</li>
</ul>
<p><img src="/imgs/iis/178.png" alt="image-20231215113625968"></p>
<p><img src="/imgs/iis/179.png" alt="image-20231215113645572"></p>
<h5 id="安全关联SA"><a href="#安全关联SA" class="headerlink" title="安全关联SA"></a>安全关联SA</h5><ul>
<li>关联是发送方和接收方之间的单向关系，该关联为两者间的通信流提供安全服务</li>
<li>由以下三个参数唯一确定<ol>
<li>安全参数索引（SPI）<br>一个分配给SA的比特串，仅在本地有意义</li>
<li>IP目的地址<br>SA的目的端地址</li>
<li>协议标识<br>标识该SA是否是个一AH安全关联或是ESP安全关联</li>
</ol>
</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">J&Ocean</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jiang-wu-19.github.io/2023/10/21/%E4%BF%A1%E6%81%AF%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">https://jiang-wu-19.github.io/2023/10/21/%E4%BF%A1%E6%81%AF%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">J&Ocean</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/">
                                    <span class="chip bg-color">信息安全</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">请我喝杯奶茶吧~</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'Nv6Wx6PAYH30bfcx7u0eDWHy-gzGzoHsz',
        appKey: 'IhPcpC3fDP8Ro7eaPakG2vSt',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/10/26/ELBO/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="ELBO">
                        
                        <span class="card-title">ELBO</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            变分推断中的Evidence Lower Bound
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-10-26
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%A7%91%E7%A0%94/" class="post-category">
                                    科研
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">
                        <span class="chip bg-color">论文阅读</span>
                    </a>
                    
                    <a href="/tags/ELBO/">
                        <span class="chip bg-color">ELBO</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/10/19/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="论文阅读">
                        
                        <span class="card-title">论文阅读</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            如何读，如何写
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-10-19
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%A7%91%E7%A0%94/" class="post-category">
                                    科研
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">
                        <span class="chip bg-color">论文阅读</span>
                    </a>
                    
                    <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B1%87%E6%8A%A5/">
                        <span class="chip bg-color">工作汇报</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: J&amp;Ocean BLOG<br />'
            + '文章作者: J&amp;Ocean<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023-2024</span>
            
            <span id="year">2023</span>
            <a href="/about" target="_blank">J&Ocean</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">287.9k</span>&nbsp;字
            
            
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2023";
                    var startMonth = "7";
                    var startDate = "2";
                    var startHour = "12";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/JIANG-Wu-19" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:wujiang0319@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=870027163" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 870027163" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>





    <a href="https://www.zhihu.com/people/bei-wei-xiao-wu-32" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/bei-wei-xiao-wu-32" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
